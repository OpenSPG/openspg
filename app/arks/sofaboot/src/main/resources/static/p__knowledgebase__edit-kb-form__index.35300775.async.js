"use strict";(self.webpackChunkcognik_web_app=self.webpackChunkcognik_web_app||[]).push([[2525],{26598:function(I,g){var e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};g.Z=e},37520:function(I,g,e){var _=e(55443),p=e(38334),S=e(86757),o=e(75380),z=e(75271),E=e(35262),O=e(20451),h=e(52676),C=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],T=z.forwardRef(function(n,j){var c=n.fieldProps,y=n.options,W=n.radioType,w=n.layout,B=n.proFieldProps,L=n.valueEnum,M=(0,p.Z)(n,C);return(0,h.jsx)(O.Z,(0,_.Z)((0,_.Z)({valueType:W==="button"?"radioButton":"radio",ref:j,valueEnum:(0,S.h)(L,void 0)},M),{},{fieldProps:(0,_.Z)({options:y,layout:w},c),proFieldProps:B,filedConfig:{customLightMode:!0}}))}),A=z.forwardRef(function(n,j){var c=n.fieldProps,y=n.children;return(0,h.jsx)(o.ZP,(0,_.Z)((0,_.Z)({},c),{},{ref:j,children:y}))}),s=(0,E.G)(A,{valuePropName:"checked",ignoreWidth:!0}),P=s;P.Group=T,P.Button=o.ZP.Button,P.displayName="ProFormComponent",g.Z=P},16331:function(I,g,e){var _=e(55443),p=e(38334),S=e(75271),o=e(20451),z=e(52676),E=["fieldProps","proFieldProps"],O=function(C,T){var A=C.fieldProps,s=C.proFieldProps,P=(0,p.Z)(C,E);return(0,z.jsx)(o.Z,(0,_.Z)({ref:T,valueType:"textarea",fieldProps:A,proFieldProps:s},P))};g.Z=S.forwardRef(O)},76958:function(I,g,e){e.r(g),e.d(g,{default:function(){return ee}});var _=e(90228),p=e.n(_),S=e(26068),o=e.n(S),z=e(87999),E=e.n(z),O=e(48305),h=e.n(O),C=e(41045),T=e(67709),A=e(27318),s=e(14378),P=e(16331),n=e(37520),j=e(27054),c=e(86487),y=e(69230),W=e(68658),w=e(77758),B=e(75271);function L(F,v,f){return M.apply(this,arguments)}function M(){return M=E()(p()().mark(function F(v,f,x){return p()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,c.request)("/api/v1/projects/".concat(v),o()({method:"PUT",data:f},x||{})));case 1:case"end":return l.stop()}},F)})),M.apply(this,arguments)}function Y(F,v){return U.apply(this,arguments)}function U(){return U=E()(p()().mark(function F(v,f){return p()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,c.request)("/api/v1/projects/".concat(v),o()({method:"DELETE"},f||{})).then(function(l){if(!l.result)throw new Error("delete project failed")}));case 1:case"end":return D.stop()}},F)})),U.apply(this,arguments)}function k(F,v){return K.apply(this,arguments)}function K(){return K=E()(p()().mark(function F(v,f){var x;return p()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return x=v.projectId,l.abrupt("return",(0,c.request)("/api/v1/projects/".concat(x),o()({method:"GET"},f||{})).then(function(R){return{data:o()({},R.result)}}));case 3:case"end":return l.stop()}},F)})),K.apply(this,arguments)}var r=e(52676),q=function(){var v=(0,c.useSearchParams)(),f=h()(v,2),x=f[0],D=f[1],l=(0,B.useState)(),R=h()(l,2),i=R[0],re=R[1],ue=(0,B.useState)(),$=h()(ue,2),d=$[0],te=$[1],ae=(0,B.useState)(),J=h()(ae,2),Z=J[0],oe=J[1],se=(0,c.useNavigate)(),ne=(0,B.useState)(!1),V=h()(ne,2),le=V[0],G=V[1],ie=(0,c.useRequest)(L,{manual:!0,onSuccess:function(){y.ZP.success("\u63D0\u4EA4\u6210\u529F"),G(!1)},onError:function(){y.ZP.error("\u63D0\u4EA4\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),G(!1)}}),de=ie.run,pe=(0,c.useRequest)(Y,{manual:!0,onSuccess:function(){y.ZP.success("\u63D0\u4EA4\u6210\u529F"),se("/knowledgebase/kb-list")},onError:function(){y.ZP.error("\u63D0\u4EA4\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5")}}),ce=pe.run,H=(0,c.useRequest)(function(){return k({projectId:Number.parseInt(x.get("projectId")||"0")})}),u=H.data,me=H.loading;(0,B.useEffect)(function(){if(u!=null&&u.config){var a=JSON.parse(u==null?void 0:u.config);a!=null&&a.graph_store&&re(a.graph_store),a.vectorizer&&te(a.vectorizer),a.prompt&&oe(a.prompt)}},[u]);var ve=function(){var a=E()(p()().mark(function b(t){var m,Q,X;return p()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:m=JSON.parse((u==null?void 0:u.config)||"{}"),Q={graph_store:o()(o()({},m==null?void 0:m.graph_store),{},{source_type:t.graph_store_source_type,database:t.graph_store_database,password:t.graph_store_password,uri:t.graph_store_uri,user:t.graph_store_user}),vectorizer:o()(o()({},m==null?void 0:m.vectorizer),{},{source_type:t.vectorizer_source_type,model:t.vectorizer_model,type:t.vectorizer_type,api_key:t.vectorizer_api_key,base_url:t.vectorizer_base_url}),prompt:o()(o()({},m==null?void 0:m.prompt),{},{source_type:t.prompt_source_type,biz_scene:t.prompt_biz_scene,language:t.prompt_language}),llm_select:[o()({},m.llm_select)],llm:o()({},m.llm)},X={id:u==null?void 0:u.id,name:t.name,description:t.description,namespace:t.namespace,config:JSON.stringify(Q)},G(!0),de((u==null?void 0:u.id)||0,X);case 5:case"end":return N.stop()}},b)}));return function(t){return a.apply(this,arguments)}}();return me||!i||!d||!Z?(0,r.jsx)(C.uk,{type:"descriptions"}):(0,r.jsx)(T._z,{content:"\u8868\u5355\u9875\u7528\u4E8E\u5411\u7528\u6237\u6536\u96C6\u6216\u9A8C\u8BC1\u4FE1\u606F\uFF0C\u57FA\u7840\u8868\u5355\u5E38\u89C1\u4E8E\u6570\u636E\u9879\u8F83\u5C11\u7684\u8868\u5355\u573A\u666F\u3002",extra:(0,r.jsx)(W.ZP,{type:"primary",danger:!0,onClick:function(){return ce((u==null?void 0:u.id)||0)},children:"\u5220\u9664\u9879\u76EE"}),children:(0,r.jsx)(w.Z,{variant:"outlined",children:(0,r.jsxs)(A.A,{loading:le,style:{margin:"auto",marginTop:8,maxWidth:600},name:"basic",layout:"vertical",initialValues:{name:u==null?void 0:u.name,namespace:u==null?void 0:u.namespace,description:u==null?void 0:u.description,graph_store_source_type:"default",graph_store_database:i==null?void 0:i.database,graph_store_password:i==null?void 0:i.password,graph_store_uri:i==null?void 0:i.uri,graph_store_user:i==null?void 0:i.user,prompt_source_type:"default",prompt_biz_scene:Z==null?void 0:Z.biz_scene,prompt_language:Z==null?void 0:Z.language,vectorizer_source_type:"default",vectorizer_model:d==null?void 0:d.model,vectorizer_type:d==null?void 0:d.type,vectorizer_api_key:d==null?void 0:d.api_key,vectorizer_base_url:d==null?void 0:d.base_url},onFinish:ve,children:[(0,r.jsx)(s.Z,{width:"md",label:"\u77E5\u8BC6\u5E93\u4E2D\u6587\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u4E2D\u6587\u540D\u79F0"}],placeholder:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u4E2D\u6587\u540D\u79F0"}),(0,r.jsx)(s.Z,{width:"md",label:"\u77E5\u8BC6\u5E93\u82F1\u6587\u540D\u79F0",name:"namespace",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u82F1\u6587\u540D\u79F0"},{pattern:/^[A-Z][A-Za-z0-9]{2,}$/,message:"\u5FC5\u987B\u4EE5\u5927\u5199\u5B57\u6BCD\u5F00\u5934\uFF0C\u4E14\u4EC5\u652F\u6301\u5B57\u6BCD\u548C\u6570\u5B57\u7EC4\u5408\uFF0C\u81F3\u5C11\u4E09\u4E2A\u5B57\u7B26"}],placeholder:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u82F1\u6587\u540D\u79F0",disabled:!0}),(0,r.jsx)(P.Z,{label:"\u77E5\u8BC6\u5E93\u63CF\u8FF0",width:"xl",name:"description",placeholder:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u63CF\u8FF0\uFF0C\u5728\u77E5\u8BC6\u62BD\u53D6\u548C\u77E5\u8BC6\u95EE\u7B54\u65F6\u4F5C\u4E3APrompt\uFF1B\u4F8B\u5982\uFF1A\u8FD9\u662F\u4E00\u4E2A\u6CD5\u5B66\u77E5\u8BC6\u5E93\uFF0C\u4E3B\u8981\u63CF\u8FF0\u6CD5\u5F8B\u76F8\u5173\u7684\u77E5\u8BC6\u3002"}),(0,r.jsx)(n.Z.Group,{name:"graph_store_source_type",label:"\u56FE\u50A8\u5B58\u914D\u7F6E",options:[{label:"\u9ED8\u8BA4\u914D\u7F6E",value:"default"},{label:"\u81EA\u5B9A\u4E49\u914D\u7F6E",value:"custom"}]}),(0,r.jsx)(s.Z,{width:"md",label:"database",name:"graph_store_database",rules:[{required:!0,message:"\u8BF7\u8F93\u5165database"}],placeholder:"\u8BF7\u8F93\u5165database",disabled:!0}),(0,r.jsx)(j.Z,{name:["graph_store_source_type"],children:function(b){var t=b.graph_store_source_type;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Z.Password,{width:"md",label:"password",name:"graph_store_password",rules:[{required:!0,message:"\u8BF7\u8F93\u5165password"}],placeholder:"\u8BF7\u8F93\u5165password",disabled:t==="default"}),(0,r.jsx)(s.Z,{width:"md",label:"uri",name:"graph_store_uri",rules:[{required:!0,message:"\u8BF7\u8F93\u5165uri"}],placeholder:"\u8BF7\u8F93\u5165uri",disabled:t==="default"}),(0,r.jsx)(s.Z,{width:"md",label:"user",name:"graph_store_user",rules:[{required:!0,message:"\u8BF7\u8F93\u5165user"}],placeholder:"\u8BF7\u8F93\u5165user",disabled:t==="default"})]})}}),(0,r.jsx)(n.Z.Group,{name:"vectorizer_source_type",label:"\u5411\u91CF\u914D\u7F6E",options:[{label:"\u9ED8\u8BA4\u914D\u7F6E",value:"default"},{label:"\u81EA\u5B9A\u4E49\u914D\u7F6E",value:"custom"}]}),(0,r.jsx)(s.Z,{width:"md",label:"type",name:"vectorizer_type",rules:[{required:!0,message:"\u8BF7\u8F93\u5165type"}],placeholder:"\u8BF7\u8F93\u5165type",disabled:!0}),(0,r.jsx)(j.Z,{name:["vectorizer_source_type"],children:function(b){var t=b.vectorizer_source_type;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Z.Password,{width:"md",label:"model",name:"vectorizer_model",rules:[{required:!0,message:"\u8BF7\u8F93\u5165model"}],placeholder:"\u8BF7\u8F93\u5165model",disabled:t==="default"}),(0,r.jsx)(s.Z,{width:"md",label:"base_url",name:"vectorizer_base_url",rules:[{required:!0,message:"\u8BF7\u8F93\u5165base_url"}],placeholder:"\u8BF7\u8F93\u5165base_url",disabled:t==="default"}),(0,r.jsx)(s.Z.Password,{width:"md",label:"api_key",name:"vectorizer_api_key",rules:[{required:!0,message:"\u8BF7\u8F93\u5165api_key"}],placeholder:"\u8BF7\u8F93\u5165api_key",disabled:t==="default"})]})}}),(0,r.jsx)(n.Z.Group,{name:"prompt_source_type",label:"\u63D0\u793A\u8BCD\u4E2D\u82F1\u6587\u914D\u7F6E",options:[{label:"\u9ED8\u8BA4\u914D\u7F6E",value:"default"},{label:"\u81EA\u5B9A\u4E49\u914D\u7F6E",value:"custom"}]}),(0,r.jsx)(j.Z,{name:["prompt_source_type"],children:function(b){var t=b.prompt_source_type;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Z,{width:"md",label:"biz_scene",name:"prompt_biz_scene",rules:[{required:!0,message:"\u8BF7\u8F93\u5165biz_scene"}],placeholder:"\u8BF7\u8F93\u5165biz_scene",disabled:t==="default"}),(0,r.jsx)(s.Z,{width:"md",label:"language",name:"prompt_language",rules:[{required:!0,message:"\u8BF7\u8F93\u5165language"}],placeholder:"\u8BF7\u8F93\u5165language",disabled:t==="default"})]})}})]})})})},ee=q}}]);
