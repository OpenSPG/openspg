"use strict";(self.webpackChunkcognik_web_app=self.webpackChunkcognik_web_app||[]).push([[3858],{26598:function(W,b){var e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};b.Z=e},37520:function(W,b,e){var p=e(55443),m=e(38334),B=e(86757),s=e(75380),D=e(75271),F=e(35262),f=e(20451),v=e(52676),c=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],y=D.forwardRef(function(o,E){var n=o.fieldProps,C=o.options,O=o.radioType,g=o.layout,A=o.proFieldProps,_=o.valueEnum,T=(0,m.Z)(o,c);return(0,v.jsx)(f.Z,(0,p.Z)((0,p.Z)({valueType:O==="button"?"radioButton":"radio",ref:E,valueEnum:(0,B.h)(_,void 0)},T),{},{fieldProps:(0,p.Z)({options:C,layout:g},n),proFieldProps:A,filedConfig:{customLightMode:!0}}))}),h=D.forwardRef(function(o,E){var n=o.fieldProps,C=o.children;return(0,v.jsx)(s.ZP,(0,p.Z)((0,p.Z)({},n),{},{ref:E,children:C}))}),u=(0,F.G)(h,{valuePropName:"checked",ignoreWidth:!0}),t=u;t.Group=y,t.Button=s.ZP.Button,t.displayName="ProFormComponent",b.Z=t},16331:function(W,b,e){var p=e(55443),m=e(38334),B=e(75271),s=e(20451),D=e(52676),F=["fieldProps","proFieldProps"],f=function(c,y){var h=c.fieldProps,u=c.proFieldProps,t=(0,m.Z)(c,F);return(0,D.jsx)(s.Z,(0,p.Z)({ref:y,valueType:"textarea",fieldProps:h,proFieldProps:u},t))};b.Z=B.forwardRef(f)},53570:function(W,b,e){e.r(b);var p=e(90228),m=e.n(p),B=e(26068),s=e.n(B),D=e(87999),F=e.n(D),f=e(48305),v=e.n(f),c=e(41045),y=e(67709),h=e(27318),u=e(14378),t=e(16331),o=e(37520),E=e(27054),n=e(86487),C=e(69230),O=e(77758),g=e(75271),A=e(5813),_=e(52676),T=function(){var w=(0,g.useState)(),I=v()(w,2),l=I[0],G=I[1],N=(0,g.useState)(),K=v()(N,2),d=K[0],$=K[1],J=(0,g.useState)(),L=v()(J,2),j=L[0],V=L[1],H=(0,g.useState)(!1),x=v()(H,2),Q=x[0],R=x[1],X=(0,n.useRequest)(A.$,{manual:!0,onSuccess:function(){C.ZP.success("\u63D0\u4EA4\u6210\u529F"),R(!1)},onError:function(){C.ZP.error("\u63D0\u4EA4\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),R(!1)}}),Y=X.run,Z=(0,n.useRequest)(function(){return(0,A.q)({configId:"KAG_CONFIG",version:"1"})}),P=Z.data,k=Z.loading;(0,g.useEffect)(function(){if(P!=null&&P.config){var a=JSON.parse(P==null?void 0:P.config);a!=null&&a.graph_store&&G(a.graph_store),a.vectorizer&&$(a.vectorizer),a.prompt&&V(a.prompt)}},[P]);var q=function(){var a=F()(m()().mark(function M(r){var i,z,S;return m()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:i=JSON.parse((P==null?void 0:P.config)||"{}"),z={graph_store:s()(s()({},i==null?void 0:i.graph_store),{},{source_type:r.graph_store_source_type,database:r.graph_store_database,password:r.graph_store_password,uri:r.graph_store_uri,user:r.graph_store_user}),vectorizer:s()(s()({},i==null?void 0:i.vectorizer),{},{source_type:r.vectorizer_source_type,model:r.vectorizer_model,type:r.vectorizer_type,api_key:r.vectorizer_api_key,base_url:r.vectorizer_base_url}),prompt:s()(s()({},i==null?void 0:i.prompt),{},{source_type:r.prompt_source_type,biz_scene:r.prompt_biz_scene,language:r.prompt_language}),llm_select:[s()({},i.llm_select)],llm:s()({},i.llm)},S={name:r.name,description:r.description,namespace:r.namespace,config:JSON.stringify(z)},R(!0),Y(S);case 5:case"end":return U.stop()}},M)}));return function(r){return a.apply(this,arguments)}}();return k||!l||!d||!j?(0,_.jsx)(c.uk,{type:"descriptions"}):(0,_.jsx)(y._z,{content:"\u8868\u5355\u9875\u7528\u4E8E\u5411\u7528\u6237\u6536\u96C6\u6216\u9A8C\u8BC1\u4FE1\u606F\uFF0C\u57FA\u7840\u8868\u5355\u5E38\u89C1\u4E8E\u6570\u636E\u9879\u8F83\u5C11\u7684\u8868\u5355\u573A\u666F\u3002",children:(0,_.jsx)(O.Z,{variant:"outlined",children:(0,_.jsxs)(h.A,{style:{margin:"auto",marginTop:8,maxWidth:600},name:"basic",layout:"vertical",initialValues:{graph_store_source_type:"default",graph_store_database:l==null?void 0:l.database,graph_store_password:l==null?void 0:l.password,graph_store_uri:l==null?void 0:l.uri,graph_store_user:l==null?void 0:l.user,prompt_source_type:"default",prompt_biz_scene:j==null?void 0:j.biz_scene,prompt_language:j==null?void 0:j.language,vectorizer_source_type:"default",vectorizer_model:d==null?void 0:d.model,vectorizer_type:d==null?void 0:d.type,vectorizer_api_key:d==null?void 0:d.api_key,vectorizer_base_url:d==null?void 0:d.base_url},loading:Q,onFinish:q,children:[(0,_.jsx)(u.Z,{width:"md",label:"\u77E5\u8BC6\u5E93\u4E2D\u6587\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u4E2D\u6587\u540D\u79F0"}],placeholder:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u4E2D\u6587\u540D\u79F0"}),(0,_.jsx)(u.Z,{width:"md",label:"\u77E5\u8BC6\u5E93\u82F1\u6587\u540D\u79F0",name:"namespace",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u82F1\u6587\u540D\u79F0"},{pattern:/^[A-Z][A-Za-z0-9]{2,}$/,message:"\u5FC5\u987B\u4EE5\u5927\u5199\u5B57\u6BCD\u5F00\u5934\uFF0C\u4E14\u4EC5\u652F\u6301\u5B57\u6BCD\u548C\u6570\u5B57\u7EC4\u5408\uFF0C\u81F3\u5C11\u4E09\u4E2A\u5B57\u7B26"}],placeholder:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u82F1\u6587\u540D\u79F0"}),(0,_.jsx)(t.Z,{label:"\u77E5\u8BC6\u5E93\u63CF\u8FF0",width:"xl",name:"description",placeholder:"\u8BF7\u8F93\u5165\u77E5\u8BC6\u5E93\u63CF\u8FF0\uFF0C\u5728\u77E5\u8BC6\u62BD\u53D6\u548C\u77E5\u8BC6\u95EE\u7B54\u65F6\u4F5C\u4E3APrompt\uFF1B\u4F8B\u5982\uFF1A\u8FD9\u662F\u4E00\u4E2A\u6CD5\u5B66\u77E5\u8BC6\u5E93\uFF0C\u4E3B\u8981\u63CF\u8FF0\u6CD5\u5F8B\u76F8\u5173\u7684\u77E5\u8BC6\u3002"}),(0,_.jsx)(o.Z.Group,{name:"graph_store_source_type",label:"\u56FE\u50A8\u5B58\u914D\u7F6E",options:[{label:"\u9ED8\u8BA4\u914D\u7F6E",value:"default"},{label:"\u81EA\u5B9A\u4E49\u914D\u7F6E",value:"custom"}]}),(0,_.jsx)(u.Z,{width:"md",label:"database",name:"graph_store_database",rules:[{required:!0,message:"\u8BF7\u8F93\u5165database"}],placeholder:"\u8BF7\u8F93\u5165database",disabled:!0}),(0,_.jsx)(E.Z,{name:["graph_store_source_type"],children:function(M){var r=M.graph_store_source_type;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(u.Z.Password,{width:"md",label:"password",name:"graph_store_password",rules:[{required:!0,message:"\u8BF7\u8F93\u5165password"}],placeholder:"\u8BF7\u8F93\u5165password",disabled:r==="default"}),(0,_.jsx)(u.Z,{width:"md",label:"uri",name:"graph_store_uri",rules:[{required:!0,message:"\u8BF7\u8F93\u5165uri"}],placeholder:"\u8BF7\u8F93\u5165uri",disabled:r==="default"}),(0,_.jsx)(u.Z,{width:"md",label:"user",name:"graph_store_user",rules:[{required:!0,message:"\u8BF7\u8F93\u5165user"}],placeholder:"\u8BF7\u8F93\u5165user",disabled:r==="default"})]})}}),(0,_.jsx)(o.Z.Group,{name:"vectorizer_source_type",label:"\u5411\u91CF\u914D\u7F6E",options:[{label:"\u9ED8\u8BA4\u914D\u7F6E",value:"default"},{label:"\u81EA\u5B9A\u4E49\u914D\u7F6E",value:"custom"}]}),(0,_.jsx)(u.Z,{width:"md",label:"type",name:"vectorizer_type",rules:[{required:!0,message:"\u8BF7\u8F93\u5165type"}],placeholder:"\u8BF7\u8F93\u5165type",disabled:!0}),(0,_.jsx)(E.Z,{name:["vectorizer_source_type"],children:function(M){var r=M.vectorizer_source_type;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(u.Z.Password,{width:"md",label:"model",name:"vectorizer_model",rules:[{required:!0,message:"\u8BF7\u8F93\u5165model"}],placeholder:"\u8BF7\u8F93\u5165model",disabled:r==="default"}),(0,_.jsx)(u.Z,{width:"md",label:"base_url",name:"vectorizer_base_url",rules:[{required:!0,message:"\u8BF7\u8F93\u5165base_url"}],placeholder:"\u8BF7\u8F93\u5165base_url",disabled:r==="default"}),(0,_.jsx)(u.Z.Password,{width:"md",label:"api_key",name:"vectorizer_api_key",rules:[{required:!0,message:"\u8BF7\u8F93\u5165api_key"}],placeholder:"\u8BF7\u8F93\u5165api_key",disabled:r==="default"})]})}}),(0,_.jsx)(o.Z.Group,{name:"prompt_source_type",label:"\u63D0\u793A\u8BCD\u4E2D\u82F1\u6587\u914D\u7F6E",options:[{label:"\u9ED8\u8BA4\u914D\u7F6E",value:"default"},{label:"\u81EA\u5B9A\u4E49\u914D\u7F6E",value:"custom"}]}),(0,_.jsx)(E.Z,{name:["prompt_source_type"],children:function(M){var r=M.prompt_source_type;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(u.Z,{width:"md",label:"biz_scene",name:"prompt_biz_scene",rules:[{required:!0,message:"\u8BF7\u8F93\u5165biz_scene"}],placeholder:"\u8BF7\u8F93\u5165biz_scene",disabled:r==="default"}),(0,_.jsx)(u.Z,{width:"md",label:"language",name:"prompt_language",rules:[{required:!0,message:"\u8BF7\u8F93\u5165language"}],placeholder:"\u8BF7\u8F93\u5165language",disabled:r==="default"})]})}})]})})})};b.default=T},5813:function(W,b,e){e.d(b,{$:function(){return v},q:function(){return y}});var p=e(90228),m=e.n(p),B=e(26068),s=e.n(B),D=e(87999),F=e.n(D),f=e(86487);function v(u,t){return c.apply(this,arguments)}function c(){return c=F()(m()().mark(function u(t,o){return m()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,f.request)("/api/v1/projects",s()({method:"POST",data:t},o||{})));case 1:case"end":return n.stop()}},u)})),c.apply(this,arguments)}function y(u,t){return h.apply(this,arguments)}function h(){return h=F()(m()().mark(function u(t,o){var E,n;return m()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return E=t.configId,n=t.version,O.abrupt("return",(0,f.request)("/api/v1/configs/".concat(E,"/version/").concat(n),s()({method:"GET"},o||{})).then(function(g){return{data:s()({},g.result)}}));case 3:case"end":return O.stop()}},u)})),h.apply(this,arguments)}}}]);
