(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_open-semantic-graph"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_open-semantic-graph"]||[]).push([["ddfa490a"],{"196d2f45":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"SemanticTokensStylingService",{enumerable:!0,get:function(){return h;}});var i=n("77b755a9"),r=n("4dc1b036"),s=n("dd8f73a0"),o=n("9bfcb0cf"),a=n("c6f02569"),l=n("2188434e"),u=n("ad8563a1"),d=this&&this.__decorate||function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o;},c=this&&this.__param||function(e,t){return function(n,i){t(n,i,e);};};let h=class extends i.Disposable{constructor(e,t,n){super(),this._themeService=e,this._logService=t,this._languageService=n,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap;}));}getStyling(e){return this._caches.has(e)||this._caches.set(e,new a.SemanticTokensProviderStyling(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e);}};h=d([c(0,s.IThemeService),c(1,o.ILogService),c(2,r.ILanguageService)],h),(0,u.registerSingleton)(l.ISemanticTokensStylingService,h,1);},"2188434e":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"ISemanticTokensStylingService",{enumerable:!0,get:function(){return i;}});let i=(0,n("2aa5bed3").createDecorator)("semanticTokensStylingService");},"2c914738":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{DefaultModelSHA1Computer:function(){return k;},ModelService:function(){return y;}});var i,r=n("852bbaa9"),s=n("e793196d"),o=n("77b755a9"),a=r._(n("c83e5ca5")),l=n("c6a657e2"),u=n("e7f83d1e"),d=n("cff8cc1d"),c=n("eaa7c5e8"),h=n("5bb4e77a"),g=n("25229b8a"),f=n("96875aa5"),m=n("77171b57"),_=n("b1fc2372"),p=n("aca47fe0"),v=n("2aa5bed3"),b=this&&this.__decorate||function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o;},S=this&&this.__param||function(e,t){return function(n,i){t(n,i,e);};};function L(e){return e.toString();}class M{constructor(e,t,n){this.model=e,this._modelEventListeners=new o.DisposableStore,this.model=e,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(t=>n(e,t)));}dispose(){this._modelEventListeners.dispose();}}let C=a.isLinux||a.isMacintosh?1:2;class w{constructor(e,t,n,i,r,s,o,a){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=i,this.heapSize=r,this.sha1=s,this.versionId=o,this.alternativeVersionId=a;}}let y=class extends o.Disposable{static #e=i=this;static #t=this.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20971520;constructor(e,t,n,i){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=n,this._instantiationService=i,this._onModelAdded=this._register(new s.Emitter),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new s.Emitter),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new s.Emitter),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration(e=>this._updateModelOptions(e))),this._updateModelOptions(void 0);}static _readModelOptions(e,t){var n;let i=u.EDITOR_MODEL_DEFAULTS.tabSize;if(e.editor&&void 0!==e.editor.tabSize){let t=parseInt(e.editor.tabSize,10);isNaN(t)||(i=t),i<1&&(i=1);}let r="tabSize";if(e.editor&&void 0!==e.editor.indentSize&&"tabSize"!==e.editor.indentSize){let t=parseInt(e.editor.indentSize,10);isNaN(t)||(r=Math.max(t,1));}let s=u.EDITOR_MODEL_DEFAULTS.insertSpaces;e.editor&&void 0!==e.editor.insertSpaces&&(s="false"!==e.editor.insertSpaces&&!!e.editor.insertSpaces);let o=C,a=e.eol;"\r\n"===a?o=2:"\n"===a&&(o=1);let l=u.EDITOR_MODEL_DEFAULTS.trimAutoWhitespace;e.editor&&void 0!==e.editor.trimAutoWhitespace&&(l="false"!==e.editor.trimAutoWhitespace&&!!e.editor.trimAutoWhitespace);let d=u.EDITOR_MODEL_DEFAULTS.detectIndentation;e.editor&&void 0!==e.editor.detectIndentation&&(d="false"!==e.editor.detectIndentation&&!!e.editor.detectIndentation);let c=u.EDITOR_MODEL_DEFAULTS.largeFileOptimizations;e.editor&&void 0!==e.editor.largeFileOptimizations&&(c="false"!==e.editor.largeFileOptimizations&&!!e.editor.largeFileOptimizations);let h=u.EDITOR_MODEL_DEFAULTS.bracketPairColorizationOptions;return(null===(n=e.editor)||void 0===n?void 0:n.bracketPairColorization)&&"object"==typeof e.editor.bracketPairColorization&&(h={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:i,indentSize:r,insertSpaces:s,detectIndentation:d,defaultEOL:o,trimAutoWhitespace:l,largeFileOptimizations:c,bracketPairColorizationOptions:h};}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);let n=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return n&&"string"==typeof n&&"auto"!==n?n:3===a.OS||2===a.OS?"\n":"\r\n";}_shouldRestoreUndoStack(){let e=this._configurationService.getValue("files.restoreUndoStack");return"boolean"!=typeof e||e;}getCreationOptions(e,t,n){let r="string"==typeof e?e:e.languageId,s=this._modelCreationOptionsByLanguageAndResource[r+t];if(!s){let e=this._configurationService.getValue("editor",{overrideIdentifier:r,resource:t}),o=this._getEOL(t,r);s=i._readModelOptions({editor:e,eol:o},n),this._modelCreationOptionsByLanguageAndResource[r+t]=s;}return s;}_updateModelOptions(e){let t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);let n=Object.keys(this._models);for(let r=0,s=n.length;r<s;r++){let s=n[r],o=this._models[s],a=o.model.getLanguageId(),l=o.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:a,resource:l})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:a,resource:l}))continue;let u=t[a+l],d=this.getCreationOptions(a,l,o.model.isForSimpleWidget);i._setModelOptionsForModel(o.model,d,u);}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&1===e.getLineCount()&&e.setEOL(1===t.defaultEOL?0:1),n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&(0,p.equals)(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions)||(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}));}_insertDisposedModel(e){this._disposedModels.set(L(e.uri),e),this._disposedModelsHeapSize+=e.heapSize;}_removeDisposedModel(e){let t=this._disposedModels.get(L(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(L(e)),t;}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){let t=[];for(this._disposedModels.forEach(e=>{e.sharesUndoRedoStack||t.push(e);}),t.sort((e,t)=>e.time-t.time);t.length>0&&this._disposedModelsHeapSize>e;){let e=t.shift();this._removeDisposedModel(e.uri),null!==e.initialUndoRedoSnapshot&&this._undoRedoService.restoreSnapshot(e.initialUndoRedoSnapshot);}}}_createModelData(e,t,n,i){let r=this.getCreationOptions(t,n,i),s=this._instantiationService.createInstance(l.TextModel,e,t,r,n);if(n&&this._disposedModels.has(L(n))){let e=this._removeDisposedModel(n),t=this._undoRedoService.getElements(n),i=this._getSHA1Computer(),r=!!i.canComputeSHA1(s)&&i.computeSHA1(s)===e.sha1;if(r||e.sharesUndoRedoStack){for(let e of t.past)(0,m.isEditStackElement)(e)&&e.matchesResource(n)&&e.setModel(s);for(let e of t.future)(0,m.isEditStackElement)(e)&&e.matchesResource(n)&&e.setModel(s);this._undoRedoService.setElementsValidFlag(n,!0,e=>(0,m.isEditStackElement)(e)&&e.matchesResource(n)),r&&(s._overwriteVersionId(e.versionId),s._overwriteAlternativeVersionId(e.alternativeVersionId),s._overwriteInitialUndoRedoSnapshot(e.initialUndoRedoSnapshot));}else null!==e.initialUndoRedoSnapshot&&this._undoRedoService.restoreSnapshot(e.initialUndoRedoSnapshot);}let o=L(s.uri);if(this._models[o])throw Error("ModelService: Cannot add model because it already exists!");let a=new M(s,e=>this._onWillDispose(e),(e,t)=>this._onDidChangeLanguage(e,t));return this._models[o]=a,a;}createModel(e,t,n,i=!1){let r;return r=t?this._createModelData(e,t,n,i):this._createModelData(e,d.PLAINTEXT_LANGUAGE_ID,n,i),this._onModelAdded.fire(r.model),r.model;}getModels(){let e=[],t=Object.keys(this._models);for(let n=0,i=t.length;n<i;n++){let i=t[n];e.push(this._models[i].model);}return e;}getModel(e){let t=L(e),n=this._models[t];return n?n.model:null;}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===_.Schemas.file||e.scheme===_.Schemas.vscodeRemote||e.scheme===_.Schemas.vscodeUserData||e.scheme===_.Schemas.vscodeNotebookCell||"fake-fs"===e.scheme;}_onWillDispose(e){let t=L(e.uri),n=this._models[t],r=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString(),s=!1,o=0;if(r||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){let t=this._undoRedoService.getElements(e.uri);if(t.past.length>0||t.future.length>0){for(let n of t.past)(0,m.isEditStackElement)(n)&&n.matchesResource(e.uri)&&(s=!0,o+=n.heapSize(e.uri),n.setModel(e.uri));for(let n of t.future)(0,m.isEditStackElement)(n)&&n.matchesResource(e.uri)&&(s=!0,o+=n.heapSize(e.uri),n.setModel(e.uri));}}let a=i.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,l=this._getSHA1Computer();if(s){if(r||!(o>a)&&l.canComputeSHA1(e))this._ensureDisposedModelsHeapSize(a-o),this._undoRedoService.setElementsValidFlag(e.uri,!1,t=>(0,m.isEditStackElement)(t)&&t.matchesResource(e.uri)),this._insertDisposedModel(new w(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),r,o,l.computeSHA1(e),e.getVersionId(),e.getAlternativeVersionId()));else{let e=n.model.getInitialUndoRedoSnapshot();null!==e&&this._undoRedoService.restoreSnapshot(e);}}else if(!r){let e=n.model.getInitialUndoRedoSnapshot();null!==e&&this._undoRedoService.restoreSnapshot(e);}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e);}_onDidChangeLanguage(e,t){let n=t.oldLanguage,r=e.getLanguageId(),s=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),o=this.getCreationOptions(r,e.uri,e.isForSimpleWidget);i._setModelOptionsForModel(e,o,s),this._onModelModeChanged.fire({model:e,oldLanguageId:n});}_getSHA1Computer(){return new k;}};y=i=b([S(0,h.IConfigurationService),S(1,c.ITextResourcePropertiesService),S(2,g.IUndoRedoService),S(3,v.IInstantiationService)],y);class k{static #e=this.MAX_MODEL_SIZE=10485760;canComputeSHA1(e){return e.getValueLength()<=k.MAX_MODEL_SIZE;}computeSHA1(e){let t;let n=new f.StringSHA1,i=e.createSnapshot();for(;t=i.read();)n.update(t);return n.digest();}}},"2d0f95c5":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"MarkerDecorationsService",{enumerable:!0,get:function(){return p;}});var i=n("18203969"),r=n("77b755a9"),s=n("fb87d58a"),o=n("dd8f73a0"),a=n("05de99d3"),l=n("64976f50"),u=n("e7e5ddb3"),d=n("b1fc2372"),c=n("e793196d"),h=n("e735ca16"),g=n("c6bdbcd6"),f=n("14786fb4"),m=this&&this.__decorate||function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o;},_=this&&this.__param||function(e,t){return function(n,i){t(n,i,e);};};let p=class extends r.Disposable{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new c.Emitter),this._markerDecorations=new g.ResourceMap,e.getModels().forEach(e=>this._onModelAdded(e)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this));}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear();}getMarker(e,t){let n=this._markerDecorations.get(e);return n&&n.getMarker(t)||null;}_handleMarkerChange(e){e.forEach(e=>{let t=this._markerDecorations.get(e);t&&this._updateDecorations(t);});}_onModelAdded(e){let t=new v(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t);}_onModelRemoved(e){let t=this._markerDecorations.get(e.uri);if(t&&(t.dispose(),this._markerDecorations.delete(e.uri)),e.uri.scheme===d.Schemas.inMemory||e.uri.scheme===d.Schemas.internal||e.uri.scheme===d.Schemas.vscode){var n;null===(n=this._markerService)||void 0===n||n.read({resource:e.uri}).map(e=>e.owner).forEach(t=>this._markerService.remove(t,[e.uri]));}}_updateDecorations(e){let t=this._markerService.read({resource:e.model.uri,take:500});e.update(t)&&this._onDidChangeMarker.fire(e.model);}};p=m([_(0,l.IModelService),_(1,i.IMarkerService)],p);class v extends r.Disposable{constructor(e){super(),this.model=e,this._map=new g.BidirectionalMap,this._register((0,r.toDisposable)(()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear();}));}update(e){let{added:t,removed:n}=(0,f.diffSets)(new Set(this._map.keys()),new Set(e));if(0===t.length&&0===n.length)return!1;let i=n.map(e=>this._map.get(e)),r=t.map(e=>({range:this._createDecorationRange(this.model,e),options:this._createDecorationOption(e)})),s=this.model.deltaDecorations(i,r);for(let e of n)this._map.delete(e);for(let e=0;e<s.length;e++)this._map.set(t[e],s[e]);return!0;}getMarker(e){return this._map.getKey(e.id);}_createDecorationRange(e,t){let n=u.Range.lift(t);if(t.severity!==i.MarkerSeverity.Hint||this._hasMarkerTag(t,1)||this._hasMarkerTag(t,2)||(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),(n=e.validateRange(n)).isEmpty()){let t=e.getLineLastNonWhitespaceColumn(n.startLineNumber)||e.getLineMaxColumn(n.startLineNumber);if(1===t||n.endColumn>=t)return n;let i=e.getWordAtPosition(n.getStartPosition());i&&(n=new u.Range(n.startLineNumber,i.startColumn,n.endLineNumber,i.endColumn));}else if(t.endColumn===Number.MAX_VALUE&&1===t.startColumn&&n.startLineNumber===n.endLineNumber){let i=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);i<n.endColumn&&(n=new u.Range(n.startLineNumber,i,n.endLineNumber,n.endColumn),t.startColumn=i);}return n;}_createDecorationOption(e){let t,n,r,l,u;switch(e.severity){case i.MarkerSeverity.Hint:t=this._hasMarkerTag(e,2)?void 0:this._hasMarkerTag(e,1)?"squiggly-unnecessary":"squiggly-hint",n=0;break;case i.MarkerSeverity.Info:t="squiggly-info",l=(0,o.themeColorFromId)(a.overviewRulerInfo),n=10,r={color:(0,o.themeColorFromId)(h.minimapInfo),position:1};break;case i.MarkerSeverity.Warning:t="squiggly-warning",l=(0,o.themeColorFromId)(a.overviewRulerWarning),n=20,r={color:(0,o.themeColorFromId)(h.minimapWarning),position:1};break;case i.MarkerSeverity.Error:default:t="squiggly-error",l=(0,o.themeColorFromId)(a.overviewRulerError),n=30,r={color:(0,o.themeColorFromId)(h.minimapError),position:1};}return e.tags&&(-1!==e.tags.indexOf(1)&&(u="squiggly-inline-unnecessary"),-1!==e.tags.indexOf(2)&&(u="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:l,position:s.OverviewRulerLane.Right},minimap:r,zIndex:n,inlineClassName:u};}_hasMarkerTag(e,t){return!!e.tags&&e.tags.indexOf(t)>=0;}}},"2f669087":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"findSectionHeaders",{enumerable:!0,get:function(){return s;}});let i=RegExp("\\bMARK:\\s*(.*)$","d"),r=/^-+|-+$/g;function s(e,t){var n;let r=[];if(t.findRegionSectionHeaders&&(null===(n=t.foldingRules)||void 0===n?void 0:n.markers)){let n=function(e,t){let n=[],i=e.getLineCount();for(let r=1;r<=i;r++){let i=e.getLineContent(r),s=i.match(t.foldingRules.markers.start);if(s){let e={startLineNumber:r,startColumn:s[0].length+1,endLineNumber:r,endColumn:i.length+1};if(e.endColumn>e.startColumn){let t={range:e,...o(i.substring(s[0].length)),shouldBeInComments:!1};(t.text||t.hasSeparatorLine)&&n.push(t);}}}return n;}(e,t);r=r.concat(n);}if(t.findMarkSectionHeaders){let t=function(e){let t=[],n=e.getLineCount();for(let r=1;r<=n;r++)!function(e,t,n){i.lastIndex=0;let r=i.exec(e);if(r){let e={startLineNumber:t,startColumn:r.indices[1][0]+1,endLineNumber:t,endColumn:r.indices[1][1]+1};if(e.endColumn>e.startColumn){let t={range:e,...o(r[1]),shouldBeInComments:!0};(t.text||t.hasSeparatorLine)&&n.push(t);}}}(e.getLineContent(r),r,t);return t;}(e);r=r.concat(t);}return r;}function o(e){let t=(e=e.trim()).startsWith("-");return{text:e=e.replace(r,""),hasSeparatorLine:t};}},"48f06c34":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{clearPlatformLanguageAssociations:function(){return f;},getLanguageIds:function(){return m;},registerPlatformLanguageAssociation:function(){return g;}});var i=n("b1a5f926"),r=n("5a3bf395"),s=n("b1fc2372"),o=n("de40946f"),a=n("8958419b"),l=n("246b9c8c"),u=n("cff8cc1d");let d=[],c=[],h=[];function g(e,t=!1){!function(e,t,n){let r={id:e.id,mime:e.mime,filename:e.filename,extension:e.extension,filepattern:e.filepattern,firstline:e.firstline,userConfigured:t,filenameLowercase:e.filename?e.filename.toLowerCase():void 0,extensionLowercase:e.extension?e.extension.toLowerCase():void 0,filepatternLowercase:e.filepattern?(0,i.parse)(e.filepattern.toLowerCase()):void 0,filepatternOnPath:!!e.filepattern&&e.filepattern.indexOf(o.posix.sep)>=0};d.push(r),r.userConfigured?h.push(r):c.push(r),n&&!r.userConfigured&&d.forEach(e=>{e.mime!==r.mime&&!e.userConfigured&&(r.extension&&e.extension===r.extension&&console.warn(`Overwriting extension <<${r.extension}>> to now point to mime <<${r.mime}>>`),r.filename&&e.filename===r.filename&&console.warn(`Overwriting filename <<${r.filename}>> to now point to mime <<${r.mime}>>`),r.filepattern&&e.filepattern===r.filepattern&&console.warn(`Overwriting filepattern <<${r.filepattern}>> to now point to mime <<${r.mime}>>`),r.firstline&&e.firstline===r.firstline&&console.warn(`Overwriting firstline <<${r.firstline}>> to now point to mime <<${r.mime}>>`));});}(e,!1,t);}function f(){d=d.filter(e=>e.userConfigured),c=[];}function m(e,t){return(function(e,t){let n;if(e)switch(e.scheme){case s.Schemas.file:n=e.fsPath;break;case s.Schemas.data:n=a.DataUri.parseMetaData(e).get(a.DataUri.META_DATA_LABEL);break;case s.Schemas.vscodeNotebookCell:n=void 0;break;default:n=e.path;}if(!n)return[{id:"unknown",mime:r.Mimes.unknown}];n=n.toLowerCase();let i=(0,o.basename)(n),g=_(n,i,h);if(g)return[g,{id:u.PLAINTEXT_LANGUAGE_ID,mime:r.Mimes.text}];let f=_(n,i,c);if(f)return[f,{id:u.PLAINTEXT_LANGUAGE_ID,mime:r.Mimes.text}];if(t){let e=function(e){if((0,l.startsWithUTF8BOM)(e)&&(e=e.substr(1)),e.length>0)for(let t=d.length-1;t>=0;t--){let n=d[t];if(!n.firstline)continue;let i=e.match(n.firstline);if(i&&i.length>0)return n;}}(t);if(e)return[e,{id:u.PLAINTEXT_LANGUAGE_ID,mime:r.Mimes.text}];}return[{id:"unknown",mime:r.Mimes.unknown}];})(e,t).map(e=>e.id);}function _(e,t,n){let i,r,s;for(let a=n.length-1;a>=0;a--){let l=n[a];if(t===l.filenameLowercase){i=l;break;}if(l.filepattern&&(!r||l.filepattern.length>r.filepattern.length)){var o;let n=l.filepatternOnPath?e:t;(null===(o=l.filepatternLowercase)||void 0===o?void 0:o.call(l,n))&&(r=l);}l.extension&&(!s||l.extension.length>s.extension.length)&&t.endsWith(l.extensionLowercase)&&(s=l);}return i||r||s||void 0;}},"590b2780":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"ITreeSitterParserService",{enumerable:!0,get:function(){return i;}});let i=(0,n("2aa5bed3").createDecorator)("treeSitterParserService");},"5a32b715":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"ILanguageFeaturesService",{enumerable:!0,get:function(){return i;}});let i=(0,n("2aa5bed3").createDecorator)("ILanguageFeaturesService");},"638fa91f":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{ILanguageFeatureDebounceService:function(){return f;},LanguageFeatureDebounceService:function(){return p;}});var i,r=n("96875aa5"),s=n("c6bdbcd6"),o=n("0841d709"),a=n("d27182b7"),l=n("ad8563a1"),u=n("2aa5bed3"),d=n("9bfcb0cf"),c=n("b1fc2372"),h=this&&this.__decorate||function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o;},g=this&&this.__param||function(e,t){return function(n,i){t(n,i,e);};};let f=(0,u.createDecorator)("ILanguageFeatureDebounceService");!function(e){let t=new WeakMap,n=0;e.of=function(e){let i=t.get(e);return void 0===i&&(i=++n,t.set(e,i)),i;};}(i||(i={}));class m{constructor(e){this._default=e;}get(e){return this._default;}update(e,t){return this._default;}default(){return this._default;}}class _{constructor(e,t,n,i,r,o){this._logService=e,this._name=t,this._registry=n,this._default=i,this._min=r,this._max=o,this._cache=new s.LRUCache(50,.7);}_key(e){return e.id+this._registry.all(e).reduce((e,t)=>(0,r.doHash)(i.of(t),e),0);}get(e){let t=this._key(e),n=this._cache.get(t);return n?(0,o.clamp)(n.value,this._min,this._max):this.default();}update(e,t){let n=this._key(e),i=this._cache.get(n);i||(i=new o.SlidingWindowAverage(6),this._cache.set(n,i));let r=(0,o.clamp)(i.update(t),this._min,this._max);return(0,c.matchesScheme)(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${r}ms`),r;}_overall(){let e=new o.MovingAverage;for(let[,t]of this._cache)e.update(t.value);return e.value;}default(){let e=0|this._overall()||this._default;return(0,o.clamp)(e,this._min,this._max);}}let p=class{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt;}for(e,t,n){let r=(null==n?void 0:n.min)??50,s=(null==n?void 0:n.max)??r**2,o=(null==n?void 0:n.key)??void 0,a=`${i.of(e)},${r}${o?","+o:""}`,l=this._data.get(a);return l||(this._isDev?(this._logService.debug(`[DEBOUNCE: ${t}] is disabled in developed mode`),l=new m(1.5*r)):l=new _(this._logService,t,e,0|this._overallAverage()||1.5*r,r,s),this._data.set(a,l)),l;}_overallAverage(){let e=new o.MovingAverage;for(let t of this._data.values())e.update(t.default());return e.value;}};p=h([g(0,d.ILogService),g(1,a.IEnvironmentService)],p),(0,l.registerSingleton)(f,p,1);},"64976f50":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"IModelService",{enumerable:!0,get:function(){return i;}});let i=(0,n("2aa5bed3").createDecorator)("modelService");},"78d71d5f":function(e,t,n){n.d(t,"__esModule",{value:!0}),n.e(t,{LanguageFeaturesService:function(){return h;}});var i=n("e793196d"),r=n("77b755a9"),s=n("fb87d58a"),o=n("98fbbb62");class a{constructor(e,t,n,i,r){this.uri=e,this.languageId=t,this.notebookUri=n,this.notebookType=i,this.recursive=r;}equals(e){var t,n;return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&(null===(t=this.notebookUri)||void 0===t?void 0:t.toString())===(null===(n=e.notebookUri)||void 0===n?void 0:n.toString())&&this.recursive===e.recursive;}}class l{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new i.Emitter,this.onDidChange=this._onDidChange.event;}register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),(0,r.toDisposable)(()=>{if(n){let e=this._entries.indexOf(n);e>=0&&(this._entries.splice(e,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0);}});}has(e){return this.all(e).length>0;}all(e){if(!e)return[];this._updateScores(e,!1);let t=[];for(let e of this._entries)e._score>0&&t.push(e.provider);return t;}ordered(e,t=!1){let n=[];return this._orderedForEach(e,t,e=>n.push(e.provider)),n;}orderedGroups(e){let t,n;let i=[];return this._orderedForEach(e,!1,e=>{t&&n===e._score?t.push(e.provider):(n=e._score,t=[e.provider],i.push(t));}),i;}_orderedForEach(e,t,n){for(let i of(this._updateScores(e,t),this._entries))i._score>0&&n(i);}_updateScores(e,t){var n,i;let r=null===(n=this._notebookInfoResolver)||void 0===n?void 0:n.call(this,e.uri),u=r?new a(e.uri,e.getLanguageId(),r.uri,r.type,t):new a(e.uri,e.getLanguageId(),void 0,void 0,t);if(null===(i=this._lastCandidate)||void 0===i||!i.equals(u)){for(let n of(this._lastCandidate=u,this._entries))if(n._score=(0,o.score)(n.selector,u.uri,u.languageId,(0,s.shouldSynchronizeModel)(e),u.notebookUri,u.notebookType),function e(t){return"string"!=typeof t&&(Array.isArray(t)?t.every(e):!!t.exclusive);}(n.selector)&&n._score>0){if(t)n._score=0;else{for(let e of this._entries)e._score=0;n._score=1e3;break;}}this._entries.sort(l._compareByScoreAndTime);}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:u(e.selector)&&!u(t.selector)?1:!u(e.selector)&&u(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0;}}function u(e){return"string"!=typeof e&&(Array.isArray(e)?e.some(u):!!e.isBuiltin);}var d=n("5a32b715"),c=n("ad8563a1");class h{constructor(){this.referenceProvider=new l(this._score.bind(this)),this.renameProvider=new l(this._score.bind(this)),this.newSymbolNamesProvider=new l(this._score.bind(this)),this.codeActionProvider=new l(this._score.bind(this)),this.definitionProvider=new l(this._score.bind(this)),this.typeDefinitionProvider=new l(this._score.bind(this)),this.declarationProvider=new l(this._score.bind(this)),this.implementationProvider=new l(this._score.bind(this)),this.documentSymbolProvider=new l(this._score.bind(this)),this.inlayHintsProvider=new l(this._score.bind(this)),this.colorProvider=new l(this._score.bind(this)),this.codeLensProvider=new l(this._score.bind(this)),this.documentFormattingEditProvider=new l(this._score.bind(this)),this.documentRangeFormattingEditProvider=new l(this._score.bind(this)),this.onTypeFormattingEditProvider=new l(this._score.bind(this)),this.signatureHelpProvider=new l(this._score.bind(this)),this.hoverProvider=new l(this._score.bind(this)),this.documentHighlightProvider=new l(this._score.bind(this)),this.multiDocumentHighlightProvider=new l(this._score.bind(this)),this.selectionRangeProvider=new l(this._score.bind(this)),this.foldingRangeProvider=new l(this._score.bind(this)),this.linkProvider=new l(this._score.bind(this)),this.inlineCompletionsProvider=new l(this._score.bind(this)),this.inlineEditProvider=new l(this._score.bind(this)),this.completionProvider=new l(this._score.bind(this)),this.linkedEditingRangeProvider=new l(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new l(this._score.bind(this)),this.documentSemanticTokensProvider=new l(this._score.bind(this)),this.documentDropEditProvider=new l(this._score.bind(this)),this.documentPasteEditProvider=new l(this._score.bind(this));}_score(e){var t;return null===(t=this._notebookTypeResolver)||void 0===t?void 0:t.call(this,e);}}(0,c.registerSingleton)(d.ILanguageFeaturesService,h,1);},"8a38bedd":function(e,t,n){"use strict";var i=n("852bbaa9")._;n.d(t,"__esModule",{value:!0}),n.e(t,{BaseEditorSimpleWorker:function(){return v;},EditorSimpleWorker:function(){return b;},create:function(){return S;}});var r=n("bc8d7448"),s=n("e7e5ddb3"),o=n("77b7f41b"),a=n("1571367e"),l=n("9546ac13"),u=n("ad681e85"),d=n("828912ae"),c=n("b3417208"),h=n("be57ca78"),g=n("aca47fe0"),f=n("b1fc2372"),m=n("d408f0fe"),_=n("2f669087"),p=n("dc152a6d");class v{constructor(){this._workerTextModelSyncServer=new p.WorkerTextModelSyncServer;}dispose(){}_getModel(e){return this._workerTextModelSyncServer.getModel(e);}_getModels(){return this._workerTextModelSyncServer.getModels();}$acceptNewModel(e){this._workerTextModelSyncServer.$acceptNewModel(e);}$acceptModelChanged(e,t){this._workerTextModelSyncServer.$acceptModelChanged(e,t);}$acceptRemovedModel(e){this._workerTextModelSyncServer.$acceptRemovedModel(e);}async $computeUnicodeHighlights(e,t,n){let i=this._getModel(e);return i?c.UnicodeTextModelHighlighter.computeUnicodeHighlights(i,t,n):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0};}async $findSectionHeaders(e,t){let n=this._getModel(e);return n?(0,_.findSectionHeaders)(n,t):[];}async $computeDiff(e,t,n,i){let r=this._getModel(e),s=this._getModel(t);return r&&s?b.computeDiff(r,s,n,i):null;}static computeDiff(e,t,n,i){let r="advanced"===i?h.linesDiffComputers.getDefault():h.linesDiffComputers.getLegacy(),s=e.getLinesContent(),o=t.getLinesContent(),a=r.computeDiff(s,o,n);function l(e){return e.map(e=>{var t;return[e.original.startLineNumber,e.original.endLineNumberExclusive,e.modified.startLineNumber,e.modified.endLineNumberExclusive,null===(t=e.innerChanges)||void 0===t?void 0:t.map(e=>[e.originalRange.startLineNumber,e.originalRange.startColumn,e.originalRange.endLineNumber,e.originalRange.endColumn,e.modifiedRange.startLineNumber,e.modifiedRange.startColumn,e.modifiedRange.endLineNumber,e.modifiedRange.endColumn])];});}return{identical:!(a.changes.length>0)&&this._modelsAreIdentical(e,t),quitEarly:a.hitTimeout,changes:l(a.changes),moves:a.moves.map(e=>[e.lineRangeMapping.original.startLineNumber,e.lineRangeMapping.original.endLineNumberExclusive,e.lineRangeMapping.modified.startLineNumber,e.lineRangeMapping.modified.endLineNumberExclusive,l(e.changes)])};}static _modelsAreIdentical(e,t){let n=e.getLineCount();if(n!==t.getLineCount())return!1;for(let i=1;i<=n;i++)if(e.getLineContent(i)!==t.getLineContent(i))return!1;return!0;}static #e=this._diffLimit=1e5;async $computeMoreMinimalEdits(e,t,n){let i;let o=this._getModel(e);if(!o)return t;let a=[];t=t.slice(0).sort((e,t)=>e.range&&t.range?s.Range.compareRangesUsingStarts(e.range,t.range):(e.range?0:1)-(t.range?0:1));let l=0;for(let e=1;e<t.length;e++)s.Range.getEndPosition(t[l].range).equals(s.Range.getStartPosition(t[e].range))?(t[l].range=s.Range.fromPositions(s.Range.getStartPosition(t[l].range),s.Range.getEndPosition(t[e].range)),t[l].text+=t[e].text):t[++l]=t[e];for(let{range:e,text:u,eol:d}of(t.length=l+1,t)){if("number"==typeof d&&(i=d),s.Range.isEmpty(e)&&!u)continue;let t=o.getValueInRange(e);if(t===(u=u.replace(/\r\n|\n|\r/g,o.eol)))continue;if(Math.max(u.length,t.length)>b._diffLimit){a.push({range:e,text:u});continue;}let l=(0,r.stringDiff)(t,u,n),c=o.offsetAt(s.Range.lift(e).getStartPosition());for(let e of l){let t=o.positionAt(c+e.originalStart),n=o.positionAt(c+e.originalStart+e.originalLength),i={text:u.substr(e.modifiedStart,e.modifiedLength),range:{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}};o.getValueInRange(i.range)!==i.text&&a.push(i);}}return"number"==typeof i&&a.push({eol:i,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),a;}async $computeLinks(e){let t=this._getModel(e);return t?(0,o.computeLinks)(t):null;}async $computeDefaultDocumentColors(e){let t=this._getModel(e);return t?(0,m.computeDefaultDocumentColors)(t):null;}static #t=this._suggestionsLimit=1e4;async $textualSuggest(e,t,n,i){let r=new d.StopWatch,s=new RegExp(n,i),o=new Set;e:for(let n of e){let e=this._getModel(n);if(e){for(let n of e.words(s))if(n!==t&&isNaN(Number(n))&&(o.add(n),o.size>b._suggestionsLimit))break e;}}return{words:Array.from(o),duration:r.elapsed()};}async $computeWordRanges(e,t,n,i){let r=this._getModel(e);if(!r)return Object.create(null);let s=new RegExp(n,i),o=Object.create(null);for(let e=t.startLineNumber;e<t.endLineNumber;e++)for(let t of r.getLineWords(e,s)){if(!isNaN(Number(t.word)))continue;let n=o[t.word];n||(n=[],o[t.word]=n),n.push({startLineNumber:e,startColumn:t.startColumn,endLineNumber:e,endColumn:t.endColumn});}return o;}async $navigateValueSet(e,t,n,i,r){let s=this._getModel(e);if(!s)return null;let o=new RegExp(i,r);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});let l=s.getValueInRange(t),u=s.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},o);if(!u)return null;let d=s.getValueInRange(u);return a.BasicInplaceReplace.INSTANCE.navigateValueSet(t,l,u,d,n);}}class b extends v{constructor(e,t){super(),this._host=e,this._foreignModuleFactory=t,this._foreignModule=null;}async $ping(){return"pong";}$loadForeignModule(e,t,r){let s={host:(0,g.createProxyObject)(r,(e,t)=>this._host.$fhr(e,t)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(s,t),Promise.resolve((0,g.getAllMethodNames)(this._foreignModule))):new Promise((r,o)=>{{let a=f.FileAccess.asBrowserUri(`${e}.js`).toString(!0);Promise.all([n.ensure("41520e5d")]).then(n.dr(i,n.bind(n,"41520e5d"))).then(e=>e.default(`./${a}`)).then(e=>{this._foreignModule=e.create(s,t),r((0,g.getAllMethodNames)(this._foreignModule));}).catch(o);}});}$fmr(e,t){if(!this._foreignModule||"function"!=typeof this._foreignModule[e])return Promise.reject(Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t));}catch(e){return Promise.reject(e);}}}function S(e){return new b(u.EditorWorkerHost.getChannel(e),null);}"function"==typeof importScripts&&(globalThis.monaco=(0,l.createMonacoBaseAPI)());},"8faab68e":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{LanguageIdCodec:function(){return h;},LanguagesRegistry:function(){return g;}});var i=n("e793196d"),r=n("77b755a9"),s=n("246b9c8c"),o=n("48f06c34"),a=n("cff8cc1d"),l=n("2ca3d919"),u=n("b9fa25a6");let d=Object.prototype.hasOwnProperty,c="vs.editor.nullLanguage";class h{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(c,0),this._register(a.PLAINTEXT_LANGUAGE_ID,1),this._nextLanguageId=2;}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t);}register(e){if(this._languageToLanguageId.has(e))return;let t=this._nextLanguageId++;this._register(e,t);}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0;}decodeLanguageId(e){return this._languageIdToLanguage[e]||c;}}class g extends r.Disposable{static #e=this.instanceCount=0;constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new i.Emitter),this.onDidChange=this._onDidChange.event,g.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new h,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(a.ModesRegistry.onDidChangeLanguages(e=>{this._initializeFromRegistry();})));}dispose(){g.instanceCount--,super.dispose();}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},(0,o.clearPlatformLanguageAssociations)();let e=[].concat(a.ModesRegistry.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e);}_registerLanguages(e){for(let t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(e=>{let t=this._languages[e];t.name&&(this._nameMap[t.name]=t.identifier),t.aliases.forEach(e=>{this._lowercaseNameMap[e.toLowerCase()]=t.identifier;}),t.mimetypes.forEach(e=>{this._mimeTypesMap[e]=t.identifier;});}),u.Registry.as(l.Extensions.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire();}_registerLanguage(e){let t;let n=e.id;d.call(this._languages,n)?t=this._languages[n]:(this.languageIdCodec.register(n),t={identifier:n,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[n]=t),this._mergeLanguage(t,e);}_mergeLanguage(e,t){let n=t.id,i=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),i=t.mimetypes[0]),i||(i=`text/x-${n}`,e.mimetypes.push(i)),Array.isArray(t.extensions))for(let r of(t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions),t.extensions))(0,o.registerPlatformLanguageAssociation)({id:n,mime:i,extension:r},this._warnOnOverwrite);if(Array.isArray(t.filenames))for(let r of t.filenames)(0,o.registerPlatformLanguageAssociation)({id:n,mime:i,filename:r},this._warnOnOverwrite),e.filenames.push(r);if(Array.isArray(t.filenamePatterns))for(let e of t.filenamePatterns)(0,o.registerPlatformLanguageAssociation)({id:n,mime:i,filepattern:e},this._warnOnOverwrite);if("string"==typeof t.firstLine&&t.firstLine.length>0){let e=t.firstLine;"^"!==e.charAt(0)&&(e="^"+e);try{let t=new RegExp(e);(0,s.regExpLeadsToEndlessLoop)(t)||(0,o.registerPlatformLanguageAssociation)({id:n,mime:i,firstline:t},this._warnOnOverwrite);}catch(n){console.warn(`[${t.id}]: Invalid regular expression \`${e}\`: `,n);}}e.aliases.push(n);let r=null;if(void 0!==t.aliases&&Array.isArray(t.aliases)&&(r=0===t.aliases.length?[null]:t.aliases),null!==r)for(let t of r)t&&0!==t.length&&e.aliases.push(t);let a=null!==r&&r.length>0;if(a&&null===r[0]);else{let t=(a?r[0]:null)||n;(a||!e.name)&&(e.name=t);}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon);}isRegisteredLanguageId(e){return!!e&&d.call(this._languages,e);}getRegisteredLanguageIds(){return Object.keys(this._languages);}getLanguageIdByLanguageName(e){let t=e.toLowerCase();return d.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null;}getLanguageIdByMimeType(e){return e&&d.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null;}guessLanguageIdByFilepathOrFirstLine(e,t){return e||t?(0,o.getLanguageIds)(e,t):[];}}},"91026ff9":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"ITextModelService",{enumerable:!0,get:function(){return i;}});let i=(0,n("2aa5bed3").createDecorator)("textModelService");},"9546ac13":function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{KeyMod:function(){return g;},createMonacoBaseAPI:function(){return f;}});var i=n("852bbaa9"),r=n("d2d60730"),s=n("e793196d"),o=n("7fa5ee2d"),a=n("f2d5d1a7"),l=n("47118010"),u=n("e7e5ddb3"),d=n("6df51a13"),c=n("755c7d16"),h=i._(n("c7cf752f"));class g{static #e=this.CtrlCmd=2048;static #t=this.Shift=1024;static #n=this.Alt=512;static #i=this.WinCtrl=256;static chord(e,t){return(0,o.KeyChord)(e,t);}}function f(){return{editor:void 0,languages:void 0,CancellationTokenSource:r.CancellationTokenSource,Emitter:s.Emitter,KeyCode:h.KeyCode,KeyMod:g,Position:l.Position,Range:u.Range,Selection:d.Selection,SelectionDirection:h.SelectionDirection,MarkerSeverity:h.MarkerSeverity,MarkerTag:h.MarkerTag,Uri:a.URI,Token:c.Token};}},ad681e85:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"EditorWorkerHost",{enumerable:!0,get:function(){return i;}});class i{static #e=this.CHANNEL_NAME="editorWorkerHost";static getChannel(e){return e.getChannel(i.CHANNEL_NAME);}static setChannel(e,t){e.setChannel(i.CHANNEL_NAME,t);}}},ae3d95cd:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"IEditorWorkerService",{enumerable:!0,get:function(){return i;}});let i=(0,n("2aa5bed3").createDecorator)("editorWorkerService");},b3417208:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"UnicodeTextModelHighlighter",{enumerable:!0,get:function(){return u;}});var i=n("852bbaa9"),r=n("e7e5ddb3"),s=n("64b17507"),o=i._(n("246b9c8c")),a=n("cac3a6eb"),l=n("4af8c435");class u{static computeUnicodeHighlights(e,t,n){var i;let u,c;let h=n?n.startLineNumber:1,g=n?n.endLineNumber:e.getLineCount(),f=new d(t),m=f.getCandidateCodePoints();u="allNonBasicAscii"===m?RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):RegExp(`${(i=Array.from(m),`[${o.escapeRegExpCharacters(i.map(e=>String.fromCodePoint(e)).join(""))}]`)}`,"g");let _=new s.Searcher(null,u),p=[],v=!1,b=0,S=0,L=0;t:for(let t=h;t<=g;t++){let n=e.getLineContent(t),i=n.length;_.reset(0);do if(c=_.next(n)){let e=c.index,s=c.index+c[0].length;if(e>0){let t=n.charCodeAt(e-1);o.isHighSurrogate(t)&&e--;}if(s+1<i){let e=n.charCodeAt(s-1);o.isHighSurrogate(e)&&s++;}let u=n.substring(e,s),d=(0,l.getWordAtText)(e+1,l.DEFAULT_WORD_REGEXP,n,0);d&&d.endColumn<=e+1&&(d=null);let h=f.shouldHighlightNonBasicASCII(u,d?d.word:null);if(0!==h){if(3===h?b++:2===h?S++:1===h?L++:(0,a.assertNever)(h),p.length>=1e3){v=!0;break t;}p.push(new r.Range(t,e+1,t,s+1));}}while(c)}return{ranges:p,hasMore:v,ambiguousCharacterCount:b,invisibleCharacterCount:S,nonBasicAsciiCharacterCount:L};}static computeUnicodeHighlightReason(e,t){let n=new d(t);switch(n.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{let i=e.codePointAt(0),r=n.ambiguousCharacters.getPrimaryConfusable(i),s=o.AmbiguousCharacters.getLocales().filter(e=>!o.AmbiguousCharacters.getInstance(new Set([...t.allowedLocales,e])).isAmbiguous(i));return{kind:0,confusableWith:String.fromCodePoint(r),notAmbiguousInLocales:s};}case 1:return{kind:2};}}}class d{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=o.AmbiguousCharacters.getInstance(new Set(e.allowedLocales));}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";let e=new Set;if(this.options.invisibleCharacters)for(let t of o.InvisibleCharacters.codePoints)c(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(let t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(let t of this.allowedCodePoints)e.delete(t);return e;}shouldHighlightNonBasicASCII(e,t){let n=e.codePointAt(0);if(this.allowedCodePoints.has(n))return 0;if(this.options.nonBasicASCII)return 1;let i=!1,r=!1;if(t)for(let e of t){let t=e.codePointAt(0),n=o.isBasicASCII(e);i=i||n,n||this.ambiguousCharacters.isAmbiguous(t)||o.InvisibleCharacters.isInvisibleCharacter(t)||(r=!0);}return!i&&r?0:this.options.invisibleCharacters&&!c(e)&&o.InvisibleCharacters.isInvisibleCharacter(n)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(n)?3:0;}}function c(e){return" "===e||"\n"===e||"	"===e;}},c6f02569:function(e,t,n){n.d(t,"__esModule",{value:!0}),n.e(t,{SemanticTokensProviderStyling:function(){return f;},toMultilineTokens2:function(){return m;}}),n("0cba99d7");var i=n("dd8f73a0"),r=n("9bfcb0cf"),s=n("47118010"),o=n("e7e5ddb3"),a=n("17014ea9");class l{static create(e,t){return new l(e,new u(t));}get startLineNumber(){return this._startLineNumber;}get endLineNumber(){return this._endLineNumber;}constructor(e,t){this._startLineNumber=e,this._tokens=t,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine();}toString(){return this._tokens.toString(this._startLineNumber);}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine();}isEmpty(){return this._tokens.isEmpty();}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null;}getRange(){let e=this._tokens.getRange();return e?new o.Range(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn):e;}removeTokens(e){let t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber();}split(e){let t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber,[i,r,s]=this._tokens.split(t,e.startColumn-1,n,e.endColumn-1);return[new l(this._startLineNumber,i),new l(this._startLineNumber+s,r)];}applyEdit(e,t){let[n,i,r]=(0,a.countEOL)(t);this.acceptEdit(e,n,i,r,t.length>0?t.charCodeAt(0):0);}acceptEdit(e,t,n,i,r){this._acceptDeleteRange(e),this._acceptInsertText(new s.Position(e.startLineNumber,e.startColumn),t,n,i,r),this._updateEndLineNumber();}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;let t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){let e=n-t;this._startLineNumber-=e;return;}let i=this._tokens.getMaxDeltaLine();if(!(t>=i+1)){if(t<0&&n>=i+1){this._startLineNumber=0,this._tokens.clear();return;}if(t<0){let i=-t;this._startLineNumber-=i,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1);}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1);}}_acceptInsertText(e,t,n,i,r){if(0===t&&0===n)return;let s=e.lineNumber-this._startLineNumber;if(s<0){this._startLineNumber+=t;return;}s>=this._tokens.getMaxDeltaLine()+1||this._tokens.acceptInsertText(s,e.column-1,t,n,i,r);}}class u{constructor(e){this._tokens=e,this._tokenCount=e.length/4;}toString(e){let t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(",")}]`;}getMaxDeltaLine(){let e=this._getTokenCount();return 0===e?-1:this._getDeltaLine(e-1);}getRange(){let e=this._getTokenCount();if(0===e)return null;let t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),i=this._getEndCharacter(e-1);return new o.Range(0,t+1,n,i+1);}_getTokenCount(){return this._tokenCount;}_getDeltaLine(e){return this._tokens[4*e];}_getStartCharacter(e){return this._tokens[4*e+1];}_getEndCharacter(e){return this._tokens[4*e+2];}isEmpty(){return 0===this._getTokenCount();}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){let i=t+Math.floor((n-t)/2),r=this._getDeltaLine(i);if(r<e)t=i+1;else if(r>e)n=i-1;else{let r=i;for(;r>t&&this._getDeltaLine(r-1)===e;)r--;let s=i;for(;s<n&&this._getDeltaLine(s+1)===e;)s++;return new d(this._tokens.subarray(4*r,4*s+4));}}return this._getDeltaLine(t)===e?new d(this._tokens.subarray(4*t,4*t+4)):null;}clear(){this._tokenCount=0;}removeTokens(e,t,n,i){let r=this._tokens,s=this._tokenCount,o=0,a=!1,l=0;for(let u=0;u<s;u++){let s=4*u,d=r[s],c=r[s+1],h=r[s+2],g=r[s+3];if((d>e||d===e&&h>=t)&&(d<n||d===n&&c<=i))a=!0;else{if(0===o&&(l=d),a){let e=4*o;r[e]=d-l,r[e+1]=c,r[e+2]=h,r[e+3]=g;}o++;}}return this._tokenCount=o,l;}split(e,t,n,i){let r=this._tokens,s=this._tokenCount,o=[],a=[],l=o,d=0,c=0;for(let o=0;o<s;o++){let s=4*o,u=r[s],h=r[s+1],g=r[s+2],f=r[s+3];if(u>e||u===e&&g>=t){if(u<n||u===n&&h<=i)continue;l!==a&&(l=a,d=0,c=u);}l[d++]=u-c,l[d++]=h,l[d++]=g,l[d++]=f;}return[new u(new Uint32Array(o)),new u(new Uint32Array(a)),c];}acceptDeleteRange(e,t,n,i,r){let s=this._tokens,o=this._tokenCount,a=i-t,l=0,u=!1;for(let d=0;d<o;d++){let c=4*d,h=s[c],g=s[c+1],f=s[c+2],m=s[c+3];if(h<t||h===t&&f<=n){l++;continue;}if(h===t&&g<n)h===i&&f>r?f-=r-n:f=n;else if(h===t&&g===n){if(h===i&&f>r)f-=r-n;else{u=!0;continue;}}else if(h<i||h===i&&g<r){if(h===i&&f>r)h=t,f=(g=n)+(f-r);else{u=!0;continue;}}else if(h>i){if(0===a&&!u){l=o;break;}h-=a;}else if(h===i&&g>=r)e&&0===h&&(g+=e,f+=e),h-=a,g-=r-n,f-=r-n;else throw Error("Not possible!");let _=4*l;s[_]=h,s[_+1]=g,s[_+2]=f,s[_+3]=m,l++;}this._tokenCount=l;}acceptInsertText(e,t,n,i,r,s){let o=0===n&&1===i&&(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122),a=this._tokens,l=this._tokenCount;for(let s=0;s<l;s++){let l=4*s,u=a[l],d=a[l+1],c=a[l+2];if(!(u<e)&&(u!==e||!(c<t))){if(u===e&&c===t){if(!o)continue;c+=1;}else if(u===e&&d<t&&t<c)0===n?c+=i:c=t;else{if(u===e&&d===t&&o)continue;if(u===e){if(u+=n,0===n)d+=i,c+=i;else{let e=c-d;c=(d=r+(d-t))+e;}}else u+=n;}a[l]=u,a[l+1]=d,a[l+2]=c;}}}}class d{constructor(e){this._tokens=e;}getCount(){return this._tokens.length/4;}getStartCharacter(e){return this._tokens[4*e+1];}getEndCharacter(e){return this._tokens[4*e+2];}getMetadata(e){return this._tokens[4*e+3];}}var c=n("4dc1b036"),h=this&&this.__decorate||function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o;},g=this&&this.__param||function(e,t){return function(n,i){t(n,i,e);};};let f=class{constructor(e,t,n,i){this._legend=e,this._themeService=t,this._languageService=n,this._logService=i,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new p;}getMetadata(e,t,n){let i;let r=this._languageService.languageIdCodec.encodeLanguageId(n),s=this._hashTable.get(e,t,r);if(s)i=s.metadata;else{let s=this._legend.tokenTypes[e],o=[];if(s){let e=t;for(let t=0;e>0&&t<this._legend.tokenModifiers.length;t++)1&e&&o.push(this._legend.tokenModifiers[t]),e>>=1;let r=this._themeService.getColorTheme().getTokenStyleMetadata(s,o,n);void 0===r?i=2147483647:(i=0,void 0!==r.italic&&(i|=1|(r.italic?1:0)<<11),void 0!==r.bold&&(i|=2|(r.bold?2:0)<<11),void 0!==r.underline&&(i|=4|(r.underline?4:0)<<11),void 0!==r.strikethrough&&(i|=8|(r.strikethrough?8:0)<<11),r.foreground&&(i|=16|r.foreground<<15),0===i&&(i=2147483647));}else i=2147483647,s="not-in-legend";this._hashTable.add(e,t,r,i);}return i;}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`));}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`));}warnInvalidEditStart(e,t,n,i,r){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${n}: The provided start offset ${i} is outside the previous data (length ${r}).`));}};function m(e,t,n){let i=e.data,r=e.data.length/5|0,s=Math.max(Math.ceil(r/1024),400),o=[],a=0,u=1,d=0;for(;a<r;){let e=a,c=Math.min(e+s,r);if(c<r){let t=c;for(;t-1>e&&0===i[5*t];)t--;if(t-1===e){let e=c;for(;e+1<r&&0===i[5*e];)e++;c=e;}else c=t;}let h=new Uint32Array((c-e)*4),g=0,f=0,m=0,_=0;for(;a<c;){let e=5*a,r=i[e],s=i[e+1],o=u+r|0,l=0===r?d+s|0:s,c=l+i[e+2]|0,p=i[e+3],v=i[e+4];if(c<=l)t.warnInvalidLengthSemanticTokens(o,l+1);else if(m===o&&_>l)t.warnOverlappingSemanticTokens(o,l+1);else{let e=t.getMetadata(p,v,n);2147483647!==e&&(0===f&&(f=o),h[g]=o-f,h[g+1]=l,h[g+2]=c,h[g+3]=e,g+=4,m=o,_=c);}u=o,d=l,a++;}g!==h.length&&(h=h.subarray(0,g));let p=l.create(f,h);o.push(p);}return o;}f=h([g(1,i.IThemeService),g(2,c.ILanguageService),g(3,r.ILogService)],f);class _{constructor(e,t,n,i){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=i,this.next=null;}}class p{static #e=this._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=p._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<p._SIZES.length?2/3*this._currentLength:0),this._elements=[],p._nullOutEntries(this._elements,this._currentLength);}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null;}_hash2(e,t){return(e<<5)-e+t|0;}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength;}get(e,t,n){let i=this._hashFunc(e,t,n),r=this._elements[i];for(;r;){if(r.tokenTypeIndex===e&&r.tokenModifierSet===t&&r.languageId===n)return r;r=r.next;}return null;}add(e,t,n,i){if(this._elementsCount++,0!==this._growCount&&this._elementsCount>=this._growCount){let e=this._elements;for(let t of(this._currentLengthIndex++,this._currentLength=p._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<p._SIZES.length?2/3*this._currentLength:0),this._elements=[],p._nullOutEntries(this._elements,this._currentLength),e)){let e=t;for(;e;){let t=e.next;e.next=null,this._add(e),e=t;}}}this._add(new _(e,t,n,i));}_add(e){let t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e;}}},c9414d1e:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"LanguageService",{enumerable:!0,get:function(){return d;}});var i=n("e793196d"),r=n("77b755a9"),s=n("8faab68e"),o=n("ec7822f6"),a=n("755c7d16"),l=n("cff8cc1d"),u=n("7a97cd02");class d extends r.Disposable{static #e=this.instanceCount=0;constructor(e=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new i.Emitter),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new i.Emitter),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new i.Emitter({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,d.instanceCount++,this._registry=this._register(new s.LanguagesRegistry(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()));}dispose(){d.instanceCount--,super.dispose();}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e);}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e);}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e);}guessLanguageIdByFilepathOrFirstLine(e,t){let n=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return(0,o.firstOrDefault)(n,null);}createById(e){return new c(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e));}createByFilepathOrFirstLine(e,t){return new c(this.onDidChange,()=>{let n=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(n);});}_createAndGetLanguageIdentifier(e){return e&&this.isRegisteredLanguageId(e)||(e=l.PLAINTEXT_LANGUAGE_ID),e;}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e));}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),a.TokenizationRegistry.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e));}}class c{constructor(e,t){this._value=(0,u.observableFromEvent)(this,e,()=>t()),this.onDidChange=i.Event.fromObservable(this._value);}get languageId(){return this._value.get();}}},dc152a6d:function(e,t,n){n.d(t,"__esModule",{value:!0}),n.e(t,{MirrorModel:function(){return m;},STOP_SYNC_MODEL_DELTA_TIME_MS:function(){return h;},WorkerTextModelSyncClient:function(){return g;},WorkerTextModelSyncServer:function(){return f;}});var i=n("6cfd0562"),r=n("77b755a9"),s=n("f2d5d1a7"),o=n("47118010"),a=n("e7e5ddb3"),l=n("4af8c435"),u=n("246b9c8c"),d=n("3c19877b");class c{constructor(e,t,n,i){this._uri=e,this._lines=t,this._eol=n,this._versionId=i,this._lineStarts=null,this._cachedTextValue=null;}dispose(){this._lines.length=0;}get version(){return this._versionId;}getText(){return null===this._cachedTextValue&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;}onEvents(e){for(let t of(e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null),e.changes))this._acceptDeleteRange(t.range),this._acceptInsertText(new o.Position(t.range.startLineNumber,t.range.startColumn),t.text);this._versionId=e.versionId,this._cachedTextValue=null;}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let i=0;i<t;i++)n[i]=this._lines[i].length+e;this._lineStarts=new d.PrefixSumComputer(n);}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length);}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return;}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber);}_acceptInsertText(e,t){if(0===t.length)return;let n=(0,u.splitLines)(t);if(1===n.length){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));return;}n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);let i=new Uint32Array(n.length-1);for(let t=1;t<n.length;t++)this._lines.splice(e.lineNumber+t-1,0,n[t]),i[t-1]=n[t].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,i);}}let h=6e4;class g extends r.Disposable{constructor(e,t,n=!1){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!n){let e=new i.IntervalTimer;e.cancelAndSet(()=>this._checkStopModelSync(),Math.round(h/2)),this._register(e);}}dispose(){for(let e in this._syncedModels)(0,r.dispose)(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose();}ensureSyncedResources(e,t=!1){for(let n of e){let e=n.toString();this._syncedModels[e]||this._beginModelSync(n,t),this._syncedModels[e]&&(this._syncedModelsLastUsedTime[e]=new Date().getTime());}}_checkStopModelSync(){let e=new Date().getTime(),t=[];for(let n in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[n]>h&&t.push(n);for(let e of t)this._stopModelSync(e);}_beginModelSync(e,t){let n=this._modelService.getModel(e);if(!n||!t&&n.isTooLargeForSyncing())return;let i=e.toString();this._proxy.$acceptNewModel({url:n.uri.toString(),lines:n.getLinesContent(),EOL:n.getEOL(),versionId:n.getVersionId()});let s=new r.DisposableStore;s.add(n.onDidChangeContent(e=>{this._proxy.$acceptModelChanged(i.toString(),e);})),s.add(n.onWillDispose(()=>{this._stopModelSync(i);})),s.add((0,r.toDisposable)(()=>{this._proxy.$acceptRemovedModel(i);})),this._syncedModels[i]=s;}_stopModelSync(e){let t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],(0,r.dispose)(t);}}class f{constructor(){this._models=Object.create(null);}getModel(e){return this._models[e];}getModels(){let e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e;}$acceptNewModel(e){this._models[e.url]=new m(s.URI.parse(e.url),e.lines,e.EOL,e.versionId);}$acceptModelChanged(e,t){this._models[e]&&this._models[e].onEvents(t);}$acceptRemovedModel(e){this._models[e]&&delete this._models[e];}}class m extends c{get uri(){return this._uri;}get eol(){return this._eol;}getValue(){return this.getText();}findMatches(e){let t=[];for(let n=0;n<this._lines.length;n++){let i=this._lines[n],r=this.offsetAt(new o.Position(n+1,1));for(let n of i.matchAll(e))(n.index||0===n.index)&&(n.index=n.index+r),t.push(n);}return t;}getLinesContent(){return this._lines.slice(0);}getLineCount(){return this._lines.length;}getLineContent(e){return this._lines[e-1];}getWordAtPosition(e,t){let n=(0,l.getWordAtText)(e.column,(0,l.ensureValidWordDefinition)(t),this._lines[e.lineNumber-1],0);return n?new a.Range(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn):null;}words(e){let t=this._lines,n=this._wordenize.bind(this),i=0,r="",s=0,o=[];return{*[Symbol.iterator](){for(;;)if(s<o.length){let e=r.substring(o[s].start,o[s].end);s+=1,yield e;}else if(i<t.length)o=n(r=t[i],e),s=0,i+=1;else break;}};}getLineWords(e,t){let n=this._lines[e-1],i=this._wordenize(n,t),r=[];for(let e of i)r.push({word:n.substring(e.start,e.end),startColumn:e.start+1,endColumn:e.end+1});return r;}_wordenize(e,t){let n;let i=[];for(t.lastIndex=0;(n=t.exec(e))&&0!==n[0].length;)i.push({start:n.index,end:n.index+n[0].length});return i;}getValueInRange(e){if((e=this._validateRange(e)).startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);let t=this._eol,n=e.startLineNumber-1,i=e.endLineNumber-1,r=[];r.push(this._lines[n].substring(e.startColumn-1));for(let e=n+1;e<i;e++)r.push(this._lines[e]);return r.push(this._lines[i].substring(0,e.endColumn-1)),r.join(t);}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1);}positionAt(e){e=Math.max(0,e=Math.floor(e)),this._ensureLineStarts();let t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,n)};}_validateRange(e){let t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||n.lineNumber!==e.endLineNumber||n.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}:e;}_validatePosition(e){if(!o.Position.isIPosition(e))throw Error("bad position");let{lineNumber:t,column:n}=e,i=!1;if(t<1)t=1,n=1,i=!0;else if(t>this._lines.length)t=this._lines.length,n=this._lines[t-1].length+1,i=!0;else{let e=this._lines[t-1].length+1;n<1?(n=1,i=!0):n>e&&(n=e,i=!0);}return i?{lineNumber:t,column:n}:e;}}},ddfa490a:function(e,t,n){"use strict";let i;n.d(t,"__esModule",{value:!0}),n.e(t,{CompletionAdapter:function(){return tA;},DefinitionAdapter:function(){return tW;},DiagnosticsAdapter:function(){return tx;},DocumentColorAdapter:function(){return tX;},DocumentFormattingEditProvider:function(){return tV;},DocumentHighlightAdapter:function(){return tU;},DocumentLinkAdapter:function(){return tB;},DocumentRangeFormattingEditProvider:function(){return tK;},DocumentSymbolAdapter:function(){return tq;},FoldingRangeAdapter:function(){return tZ;},HoverAdapter:function(){return tO;},ReferenceAdapter:function(){return t$;},RenameAdapter:function(){return tH;},SelectionRangeAdapter:function(){return tY;},WorkerManager:function(){return tE;},fromPosition:function(){return tN;},fromRange:function(){return tD;},setupMode:function(){return t0;},setupMode1:function(){return tQ;},toRange:function(){return tT;},toTextEdit:function(){return tP;}});var r,s,o,a,l,u,d,c,h,g,f,m,_,p,v,b,S,L,M,C,w,y,k,I,E,R,x,A,N,D,T,P,O,F,U,W,j,$,H,q,z,B,V,K,G,X,Z,Y,J,Q,ee,et,en,ei,er,es,eo,ea,el,eu,ed,ec,eh,eg,ef,em,e_,ep,ev,eb,eS,eL,eM,eC,ew,ey,ek,eI,eE,eR,ex,eA,eN,eD,eT,eP,eO,eF,eU,eW,ej,e$,eH,eq,ez,eB,eV,eK,eG,eX,eZ,eY,eJ,eQ,e0,e1,e2,e3,e7,e5,e4,e8,e6,e9,te,tt,tn,ti,tr,ts,to,ta,tl,tu,td,tc,th,tg,tf,tm,t_,tp,tv,tb,tS,tL=n("852bbaa9")._(n("6cbf288b")),tM=Object.defineProperty,tC=Object.getOwnPropertyDescriptor,tw=Object.getOwnPropertyNames,ty=Object.prototype.hasOwnProperty,tk=(e,t,n,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of tw(t))ty.call(e,r)||r===n||tM(e,r,{get:()=>t[r],enumerable:!(i=tC(t,r))||i.enumerable});return e;},tI={};tk(tI,tL,"default"),i&&tk(i,tL,"default");var tE=class{constructor(e){this._defaults=e,this._worker=null,this._client=null,this._idleCheckInterval=window.setInterval(()=>this._checkIfIdle(),3e4),this._lastUsedTime=0,this._configChangeListener=this._defaults.onDidChange(()=>this._stopWorker());}_stopWorker(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null;}dispose(){clearInterval(this._idleCheckInterval),this._configChangeListener.dispose(),this._stopWorker();}_checkIfIdle(){this._worker&&Date.now()-this._lastUsedTime>12e4&&this._stopWorker();}_getClient(){return this._lastUsedTime=Date.now(),this._client||(this._worker=tI.editor.createWebWorker({moduleId:"vs/language/html/htmlWorker",createData:{languageSettings:this._defaults.options,languageId:this._defaults.languageId},label:this._defaults.languageId}),this._client=this._worker.getProxy()),this._client;}getLanguageServiceWorker(...e){let t;return this._getClient().then(e=>{t=e;}).then(t=>{if(this._worker)return this._worker.withSyncedResources(e);}).then(e=>t);}};(r||(r={})).is=function(e){return"string"==typeof e;},(s||(s={})).is=function(e){return"string"==typeof e;},(ex=o||(o={})).MIN_VALUE=-2147483648,ex.MAX_VALUE=2147483647,ex.is=function(e){return"number"==typeof e&&ex.MIN_VALUE<=e&&e<=ex.MAX_VALUE;},(eA=a||(a={})).MIN_VALUE=0,eA.MAX_VALUE=2147483647,eA.is=function(e){return"number"==typeof e&&eA.MIN_VALUE<=e&&e<=eA.MAX_VALUE;},(eN=l||(l={})).create=function(e,t){return e===Number.MAX_VALUE&&(e=a.MAX_VALUE),t===Number.MAX_VALUE&&(t=a.MAX_VALUE),{line:e,character:t};},eN.is=function(e){return eR.objectLiteral(e)&&eR.uinteger(e.line)&&eR.uinteger(e.character);},(eD=u||(u={})).create=function(e,t,n,i){if(eR.uinteger(e)&&eR.uinteger(t)&&eR.uinteger(n)&&eR.uinteger(i))return{start:l.create(e,t),end:l.create(n,i)};if(l.is(e)&&l.is(t))return{start:e,end:t};throw Error(`Range#create called with invalid arguments[${e}, ${t}, ${n}, ${i}]`);},eD.is=function(e){return eR.objectLiteral(e)&&l.is(e.start)&&l.is(e.end);},(eT=d||(d={})).create=function(e,t){return{uri:e,range:t};},eT.is=function(e){return eR.objectLiteral(e)&&u.is(e.range)&&(eR.string(e.uri)||eR.undefined(e.uri));},(eP=c||(c={})).create=function(e,t,n,i){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:i};},eP.is=function(e){return eR.objectLiteral(e)&&u.is(e.targetRange)&&eR.string(e.targetUri)&&u.is(e.targetSelectionRange)&&(u.is(e.originSelectionRange)||eR.undefined(e.originSelectionRange));},(eO=h||(h={})).create=function(e,t,n,i){return{red:e,green:t,blue:n,alpha:i};},eO.is=function(e){return eR.objectLiteral(e)&&eR.numberRange(e.red,0,1)&&eR.numberRange(e.green,0,1)&&eR.numberRange(e.blue,0,1)&&eR.numberRange(e.alpha,0,1);},(eF=g||(g={})).create=function(e,t){return{range:e,color:t};},eF.is=function(e){return eR.objectLiteral(e)&&u.is(e.range)&&h.is(e.color);},(eU=f||(f={})).create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n};},eU.is=function(e){return eR.objectLiteral(e)&&eR.string(e.label)&&(eR.undefined(e.textEdit)||C.is(e))&&(eR.undefined(e.additionalTextEdits)||eR.typedArray(e.additionalTextEdits,C.is));},(eW=m||(m={})).Comment="comment",eW.Imports="imports",eW.Region="region",(ej=_||(_={})).create=function(e,t,n,i,r,s){let o={startLine:e,endLine:t};return eR.defined(n)&&(o.startCharacter=n),eR.defined(i)&&(o.endCharacter=i),eR.defined(r)&&(o.kind=r),eR.defined(s)&&(o.collapsedText=s),o;},ej.is=function(e){return eR.objectLiteral(e)&&eR.uinteger(e.startLine)&&eR.uinteger(e.startLine)&&(eR.undefined(e.startCharacter)||eR.uinteger(e.startCharacter))&&(eR.undefined(e.endCharacter)||eR.uinteger(e.endCharacter))&&(eR.undefined(e.kind)||eR.string(e.kind));},(e$=p||(p={})).create=function(e,t){return{location:e,message:t};},e$.is=function(e){return eR.defined(e)&&d.is(e.location)&&eR.string(e.message);},(eH=v||(v={})).Error=1,eH.Warning=2,eH.Information=3,eH.Hint=4,(eq=b||(b={})).Unnecessary=1,eq.Deprecated=2,(S||(S={})).is=function(e){return eR.objectLiteral(e)&&eR.string(e.href);},(ez=L||(L={})).create=function(e,t,n,i,r,s){let o={range:e,message:t};return eR.defined(n)&&(o.severity=n),eR.defined(i)&&(o.code=i),eR.defined(r)&&(o.source=r),eR.defined(s)&&(o.relatedInformation=s),o;},ez.is=function(e){var t;return eR.defined(e)&&u.is(e.range)&&eR.string(e.message)&&(eR.number(e.severity)||eR.undefined(e.severity))&&(eR.integer(e.code)||eR.string(e.code)||eR.undefined(e.code))&&(eR.undefined(e.codeDescription)||eR.string(null===(t=e.codeDescription)||void 0===t?void 0:t.href))&&(eR.string(e.source)||eR.undefined(e.source))&&(eR.undefined(e.relatedInformation)||eR.typedArray(e.relatedInformation,p.is));},(eB=M||(M={})).create=function(e,t,...n){let i={title:e,command:t};return eR.defined(n)&&n.length>0&&(i.arguments=n),i;},eB.is=function(e){return eR.defined(e)&&eR.string(e.title)&&eR.string(e.command);},(eV=C||(C={})).replace=function(e,t){return{range:e,newText:t};},eV.insert=function(e,t){return{range:{start:e,end:e},newText:t};},eV.del=function(e){return{range:e,newText:""};},eV.is=function(e){return eR.objectLiteral(e)&&eR.string(e.newText)&&u.is(e.range);},(eK=w||(w={})).create=function(e,t,n){let i={label:e};return void 0!==t&&(i.needsConfirmation=t),void 0!==n&&(i.description=n),i;},eK.is=function(e){return eR.objectLiteral(e)&&eR.string(e.label)&&(eR.boolean(e.needsConfirmation)||void 0===e.needsConfirmation)&&(eR.string(e.description)||void 0===e.description);},(y||(y={})).is=function(e){return eR.string(e);},(eG=k||(k={})).replace=function(e,t,n){return{range:e,newText:t,annotationId:n};},eG.insert=function(e,t,n){return{range:{start:e,end:e},newText:t,annotationId:n};},eG.del=function(e,t){return{range:e,newText:"",annotationId:t};},eG.is=function(e){return C.is(e)&&(w.is(e.annotationId)||y.is(e.annotationId));},(eX=I||(I={})).create=function(e,t){return{textDocument:e,edits:t};},eX.is=function(e){return eR.defined(e)&&T.is(e.textDocument)&&Array.isArray(e.edits);},(eZ=E||(E={})).create=function(e,t,n){let i={kind:"create",uri:e};return void 0!==t&&(void 0!==t.overwrite||void 0!==t.ignoreIfExists)&&(i.options=t),void 0!==n&&(i.annotationId=n),i;},eZ.is=function(e){return e&&"create"===e.kind&&eR.string(e.uri)&&(void 0===e.options||(void 0===e.options.overwrite||eR.boolean(e.options.overwrite))&&(void 0===e.options.ignoreIfExists||eR.boolean(e.options.ignoreIfExists)))&&(void 0===e.annotationId||y.is(e.annotationId));},(eY=R||(R={})).create=function(e,t,n,i){let r={kind:"rename",oldUri:e,newUri:t};return void 0!==n&&(void 0!==n.overwrite||void 0!==n.ignoreIfExists)&&(r.options=n),void 0!==i&&(r.annotationId=i),r;},eY.is=function(e){return e&&"rename"===e.kind&&eR.string(e.oldUri)&&eR.string(e.newUri)&&(void 0===e.options||(void 0===e.options.overwrite||eR.boolean(e.options.overwrite))&&(void 0===e.options.ignoreIfExists||eR.boolean(e.options.ignoreIfExists)))&&(void 0===e.annotationId||y.is(e.annotationId));},(eJ=x||(x={})).create=function(e,t,n){let i={kind:"delete",uri:e};return void 0!==t&&(void 0!==t.recursive||void 0!==t.ignoreIfNotExists)&&(i.options=t),void 0!==n&&(i.annotationId=n),i;},eJ.is=function(e){return e&&"delete"===e.kind&&eR.string(e.uri)&&(void 0===e.options||(void 0===e.options.recursive||eR.boolean(e.options.recursive))&&(void 0===e.options.ignoreIfNotExists||eR.boolean(e.options.ignoreIfNotExists)))&&(void 0===e.annotationId||y.is(e.annotationId));},(A||(A={})).is=function(e){return e&&(void 0!==e.changes||void 0!==e.documentChanges)&&(void 0===e.documentChanges||e.documentChanges.every(e=>eR.string(e.kind)?E.is(e)||R.is(e)||x.is(e):I.is(e)));},(eQ=N||(N={})).create=function(e){return{uri:e};},eQ.is=function(e){return eR.defined(e)&&eR.string(e.uri);},(e0=D||(D={})).create=function(e,t){return{uri:e,version:t};},e0.is=function(e){return eR.defined(e)&&eR.string(e.uri)&&eR.integer(e.version);},(e1=T||(T={})).create=function(e,t){return{uri:e,version:t};},e1.is=function(e){return eR.defined(e)&&eR.string(e.uri)&&(null===e.version||eR.integer(e.version));},(e2=P||(P={})).create=function(e,t,n,i){return{uri:e,languageId:t,version:n,text:i};},e2.is=function(e){return eR.defined(e)&&eR.string(e.uri)&&eR.string(e.languageId)&&eR.integer(e.version)&&eR.string(e.text);},(e3=O||(O={})).PlainText="plaintext",e3.Markdown="markdown",e3.is=function(e){return e===e3.PlainText||e===e3.Markdown;},(F||(F={})).is=function(e){return eR.objectLiteral(e)&&O.is(e.kind)&&eR.string(e.value);},(e7=U||(U={})).Text=1,e7.Method=2,e7.Function=3,e7.Constructor=4,e7.Field=5,e7.Variable=6,e7.Class=7,e7.Interface=8,e7.Module=9,e7.Property=10,e7.Unit=11,e7.Value=12,e7.Enum=13,e7.Keyword=14,e7.Snippet=15,e7.Color=16,e7.File=17,e7.Reference=18,e7.Folder=19,e7.EnumMember=20,e7.Constant=21,e7.Struct=22,e7.Event=23,e7.Operator=24,e7.TypeParameter=25,(e5=W||(W={})).PlainText=1,e5.Snippet=2,(j||(j={})).Deprecated=1,(e4=$||($={})).create=function(e,t,n){return{newText:e,insert:t,replace:n};},e4.is=function(e){return e&&eR.string(e.newText)&&u.is(e.insert)&&u.is(e.replace);},(e8=H||(H={})).asIs=1,e8.adjustIndentation=2,(q||(q={})).is=function(e){return e&&(eR.string(e.detail)||void 0===e.detail)&&(eR.string(e.description)||void 0===e.description);},(z||(z={})).create=function(e){return{label:e};},(B||(B={})).create=function(e,t){return{items:e||[],isIncomplete:!!t};},(e6=V||(V={})).fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&");},e6.is=function(e){return eR.string(e)||eR.objectLiteral(e)&&eR.string(e.language)&&eR.string(e.value);},(K||(K={})).is=function(e){return!!e&&eR.objectLiteral(e)&&(F.is(e.contents)||V.is(e.contents)||eR.typedArray(e.contents,V.is))&&(void 0===e.range||u.is(e.range));},(G||(G={})).create=function(e,t){return t?{label:e,documentation:t}:{label:e};},(X||(X={})).create=function(e,t,...n){let i={label:e};return eR.defined(t)&&(i.documentation=t),eR.defined(n)?i.parameters=n:i.parameters=[],i;},(e9=Z||(Z={})).Text=1,e9.Read=2,e9.Write=3,(Y||(Y={})).create=function(e,t){let n={range:e};return eR.number(t)&&(n.kind=t),n;},(te=J||(J={})).File=1,te.Module=2,te.Namespace=3,te.Package=4,te.Class=5,te.Method=6,te.Property=7,te.Field=8,te.Constructor=9,te.Enum=10,te.Interface=11,te.Function=12,te.Variable=13,te.Constant=14,te.String=15,te.Number=16,te.Boolean=17,te.Array=18,te.Object=19,te.Key=20,te.Null=21,te.EnumMember=22,te.Struct=23,te.Event=24,te.Operator=25,te.TypeParameter=26,(Q||(Q={})).Deprecated=1,(ee||(ee={})).create=function(e,t,n,i,r){let s={name:e,kind:t,location:{uri:i,range:n}};return r&&(s.containerName=r),s;},(et||(et={})).create=function(e,t,n,i){return void 0!==i?{name:e,kind:t,location:{uri:n,range:i}}:{name:e,kind:t,location:{uri:n}};},(tt=en||(en={})).create=function(e,t,n,i,r,s){let o={name:e,detail:t,kind:n,range:i,selectionRange:r};return void 0!==s&&(o.children=s),o;},tt.is=function(e){return e&&eR.string(e.name)&&eR.number(e.kind)&&u.is(e.range)&&u.is(e.selectionRange)&&(void 0===e.detail||eR.string(e.detail))&&(void 0===e.deprecated||eR.boolean(e.deprecated))&&(void 0===e.children||Array.isArray(e.children))&&(void 0===e.tags||Array.isArray(e.tags));},(tn=ei||(ei={})).Empty="",tn.QuickFix="quickfix",tn.Refactor="refactor",tn.RefactorExtract="refactor.extract",tn.RefactorInline="refactor.inline",tn.RefactorRewrite="refactor.rewrite",tn.Source="source",tn.SourceOrganizeImports="source.organizeImports",tn.SourceFixAll="source.fixAll",(ti=er||(er={})).Invoked=1,ti.Automatic=2,(tr=es||(es={})).create=function(e,t,n){let i={diagnostics:e};return null!=t&&(i.only=t),null!=n&&(i.triggerKind=n),i;},tr.is=function(e){return eR.defined(e)&&eR.typedArray(e.diagnostics,L.is)&&(void 0===e.only||eR.typedArray(e.only,eR.string))&&(void 0===e.triggerKind||e.triggerKind===er.Invoked||e.triggerKind===er.Automatic);},(ts=eo||(eo={})).create=function(e,t,n){let i={title:e},r=!0;return"string"==typeof t?(r=!1,i.kind=t):M.is(t)?i.command=t:i.edit=t,r&&void 0!==n&&(i.kind=n),i;},ts.is=function(e){return e&&eR.string(e.title)&&(void 0===e.diagnostics||eR.typedArray(e.diagnostics,L.is))&&(void 0===e.kind||eR.string(e.kind))&&(void 0!==e.edit||void 0!==e.command)&&(void 0===e.command||M.is(e.command))&&(void 0===e.isPreferred||eR.boolean(e.isPreferred))&&(void 0===e.edit||A.is(e.edit));},(to=ea||(ea={})).create=function(e,t){let n={range:e};return eR.defined(t)&&(n.data=t),n;},to.is=function(e){return eR.defined(e)&&u.is(e.range)&&(eR.undefined(e.command)||M.is(e.command));},(ta=el||(el={})).create=function(e,t){return{tabSize:e,insertSpaces:t};},ta.is=function(e){return eR.defined(e)&&eR.uinteger(e.tabSize)&&eR.boolean(e.insertSpaces);},(tl=eu||(eu={})).create=function(e,t,n){return{range:e,target:t,data:n};},tl.is=function(e){return eR.defined(e)&&u.is(e.range)&&(eR.undefined(e.target)||eR.string(e.target));},(tu=ed||(ed={})).create=function(e,t){return{range:e,parent:t};},tu.is=function(e){return eR.objectLiteral(e)&&u.is(e.range)&&(void 0===e.parent||tu.is(e.parent));},(td=ec||(ec={})).namespace="namespace",td.type="type",td.class="class",td.enum="enum",td.interface="interface",td.struct="struct",td.typeParameter="typeParameter",td.parameter="parameter",td.variable="variable",td.property="property",td.enumMember="enumMember",td.event="event",td.function="function",td.method="method",td.macro="macro",td.keyword="keyword",td.modifier="modifier",td.comment="comment",td.string="string",td.number="number",td.regexp="regexp",td.operator="operator",td.decorator="decorator",(tc=eh||(eh={})).declaration="declaration",tc.definition="definition",tc.readonly="readonly",tc.static="static",tc.deprecated="deprecated",tc.abstract="abstract",tc.async="async",tc.modification="modification",tc.documentation="documentation",tc.defaultLibrary="defaultLibrary",(eg||(eg={})).is=function(e){return eR.objectLiteral(e)&&(void 0===e.resultId||"string"==typeof e.resultId)&&Array.isArray(e.data)&&(0===e.data.length||"number"==typeof e.data[0]);},(th=ef||(ef={})).create=function(e,t){return{range:e,text:t};},th.is=function(e){return null!=e&&u.is(e.range)&&eR.string(e.text);},(tg=em||(em={})).create=function(e,t,n){return{range:e,variableName:t,caseSensitiveLookup:n};},tg.is=function(e){return null!=e&&u.is(e.range)&&eR.boolean(e.caseSensitiveLookup)&&(eR.string(e.variableName)||void 0===e.variableName);},(tf=e_||(e_={})).create=function(e,t){return{range:e,expression:t};},tf.is=function(e){return null!=e&&u.is(e.range)&&(eR.string(e.expression)||void 0===e.expression);},(tm=ep||(ep={})).create=function(e,t){return{frameId:e,stoppedLocation:t};},tm.is=function(e){return eR.defined(e)&&u.is(e.stoppedLocation);},(t_=ev||(ev={})).Type=1,t_.Parameter=2,t_.is=function(e){return 1===e||2===e;},(tp=eb||(eb={})).create=function(e){return{value:e};},tp.is=function(e){return eR.objectLiteral(e)&&(void 0===e.tooltip||eR.string(e.tooltip)||F.is(e.tooltip))&&(void 0===e.location||d.is(e.location))&&(void 0===e.command||M.is(e.command));},(tv=eS||(eS={})).create=function(e,t,n){let i={position:e,label:t};return void 0!==n&&(i.kind=n),i;},tv.is=function(e){return eR.objectLiteral(e)&&l.is(e.position)&&(eR.string(e.label)||eR.typedArray(e.label,eb.is))&&(void 0===e.kind||ev.is(e.kind))&&void 0===e.textEdits||eR.typedArray(e.textEdits,C.is)&&(void 0===e.tooltip||eR.string(e.tooltip)||F.is(e.tooltip))&&(void 0===e.paddingLeft||eR.boolean(e.paddingLeft))&&(void 0===e.paddingRight||eR.boolean(e.paddingRight));},(eL||(eL={})).createSnippet=function(e){return{kind:"snippet",value:e};},(eM||(eM={})).create=function(e,t,n,i){return{insertText:e,filterText:t,range:n,command:i};},(eC||(eC={})).create=function(e){return{items:e};},(tb=ew||(ew={})).Invoked=0,tb.Automatic=1,(ey||(ey={})).create=function(e,t){return{range:e,text:t};},(ek||(ek={})).create=function(e,t){return{triggerKind:e,selectedCompletionInfo:t};},(eI||(eI={})).is=function(e){return eR.objectLiteral(e)&&s.is(e.uri)&&eR.string(e.name);},(tS=eE||(eE={})).create=function(e,t,n,i){return new tR(e,t,n,i);},tS.is=function(e){return!!(eR.defined(e)&&eR.string(e.uri)&&(eR.undefined(e.languageId)||eR.string(e.languageId))&&eR.uinteger(e.lineCount)&&eR.func(e.getText)&&eR.func(e.positionAt)&&eR.func(e.offsetAt));},tS.applyEdits=function(e,t){let n=e.getText(),i=function e(t,n){if(t.length<=1)return t;let i=t.length/2|0,r=t.slice(0,i),s=t.slice(i);e(r,n),e(s,n);let o=0,a=0,l=0;for(;o<r.length&&a<s.length;)0>=n(r[o],s[a])?t[l++]=r[o++]:t[l++]=s[a++];for(;o<r.length;)t[l++]=r[o++];for(;a<s.length;)t[l++]=s[a++];return t;}(t,(e,t)=>{let n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n;}),r=n.length;for(let t=i.length-1;t>=0;t--){let s=i[t],o=e.offsetAt(s.range.start),a=e.offsetAt(s.range.end);if(a<=r)n=n.substring(0,o)+s.newText+n.substring(a,n.length);else throw Error("Overlapping edit");r=o;}return n;};var tR=class{constructor(e,t,n,i){this._uri=e,this._languageId=t,this._version=n,this._content=i,this._lineOffsets=void 0;}get uri(){return this._uri;}get languageId(){return this._languageId;}get version(){return this._version;}getText(e){if(e){let t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n);}return this._content;}update(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0;}getLineOffsets(){if(void 0===this._lineOffsets){let e=[],t=this._content,n=!0;for(let i=0;i<t.length;i++){n&&(e.push(i),n=!1);let r=t.charAt(i);n="\r"===r||"\n"===r,"\r"===r&&i+1<t.length&&"\n"===t.charAt(i+1)&&i++;}n&&t.length>0&&e.push(t.length),this._lineOffsets=e;}return this._lineOffsets;}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let t=this.getLineOffsets(),n=0,i=t.length;if(0===i)return l.create(0,e);for(;n<i;){let r=Math.floor((n+i)/2);t[r]>e?i=r:n=r+1;}let r=n-1;return l.create(r,e-t[r]);}offsetAt(e){let t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;let n=t[e.line],i=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,i),n);}get lineCount(){return this.getLineOffsets().length;}};!function(e){let t=Object.prototype.toString;e.defined=function(e){return void 0!==e;},e.undefined=function(e){return void 0===e;},e.boolean=function(e){return!0===e||!1===e;},e.string=function(e){return"[object String]"===t.call(e);},e.number=function(e){return"[object Number]"===t.call(e);},e.numberRange=function(e,n,i){return"[object Number]"===t.call(e)&&n<=e&&e<=i;},e.integer=function(e){return"[object Number]"===t.call(e)&&-2147483648<=e&&e<=2147483647;},e.uinteger=function(e){return"[object Number]"===t.call(e)&&0<=e&&e<=2147483647;},e.func=function(e){return"[object Function]"===t.call(e);},e.objectLiteral=function(e){return null!==e&&"object"==typeof e;},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t);};}(eR||(eR={}));var tx=class{constructor(e,t,n){this._languageId=e,this._worker=t,this._disposables=[],this._listener=Object.create(null);let i=e=>{let t,n=e.getLanguageId();n===this._languageId&&(this._listener[e.uri.toString()]=e.onDidChangeContent(()=>{window.clearTimeout(t),t=window.setTimeout(()=>this._doValidate(e.uri,n),500);}),this._doValidate(e.uri,n));},r=e=>{tI.editor.setModelMarkers(e,this._languageId,[]);let t=e.uri.toString(),n=this._listener[t];n&&(n.dispose(),delete this._listener[t]);};this._disposables.push(tI.editor.onDidCreateModel(i)),this._disposables.push(tI.editor.onWillDisposeModel(r)),this._disposables.push(tI.editor.onDidChangeModelLanguage(e=>{r(e.model),i(e.model);})),this._disposables.push(n(e=>{tI.editor.getModels().forEach(e=>{e.getLanguageId()===this._languageId&&(r(e),i(e));});})),this._disposables.push({dispose:()=>{for(let e in tI.editor.getModels().forEach(r),this._listener)this._listener[e].dispose();}}),tI.editor.getModels().forEach(i);}dispose(){this._disposables.forEach(e=>e&&e.dispose()),this._disposables.length=0;}_doValidate(e,t){this._worker(e).then(t=>t.doValidation(e.toString())).then(n=>{let i=n.map(e=>{let t;return t="number"==typeof e.code?String(e.code):e.code,{severity:function(e){switch(e){case v.Error:return tI.MarkerSeverity.Error;case v.Warning:return tI.MarkerSeverity.Warning;case v.Information:return tI.MarkerSeverity.Info;case v.Hint:return tI.MarkerSeverity.Hint;default:return tI.MarkerSeverity.Info;}}(e.severity),startLineNumber:e.range.start.line+1,startColumn:e.range.start.character+1,endLineNumber:e.range.end.line+1,endColumn:e.range.end.character+1,message:e.message,code:t,source:e.source};}),r=tI.editor.getModel(e);r&&r.getLanguageId()===t&&tI.editor.setModelMarkers(r,t,i);}).then(void 0,e=>{console.error(e);});}},tA=class{constructor(e,t){this._worker=e,this._triggerCharacters=t;}get triggerCharacters(){return this._triggerCharacters;}provideCompletionItems(e,t,n,i){let r=e.uri;return this._worker(r).then(e=>e.doComplete(r.toString(),tN(t))).then(n=>{if(!n)return;let i=e.getWordUntilPosition(t),r=new tI.Range(t.lineNumber,i.startColumn,t.lineNumber,i.endColumn),s=n.items.map(e=>{var t,n;let i={label:e.label,insertText:e.insertText||e.label,sortText:e.sortText,filterText:e.filterText,documentation:e.documentation,detail:e.detail,command:(t=e.command)&&"editor.action.triggerSuggest"===t.command?{id:t.command,title:t.title,arguments:t.arguments}:void 0,range:r,kind:function(e){let t=tI.languages.CompletionItemKind;switch(e){case U.Text:return t.Text;case U.Method:return t.Method;case U.Function:return t.Function;case U.Constructor:return t.Constructor;case U.Field:return t.Field;case U.Variable:return t.Variable;case U.Class:return t.Class;case U.Interface:return t.Interface;case U.Module:return t.Module;case U.Property:break;case U.Unit:return t.Unit;case U.Value:return t.Value;case U.Enum:return t.Enum;case U.Keyword:return t.Keyword;case U.Snippet:return t.Snippet;case U.Color:return t.Color;case U.File:return t.File;case U.Reference:return t.Reference;}return t.Property;}(e.kind)};return e.textEdit&&(void 0!==(n=e.textEdit).insert&&void 0!==n.replace?i.range={insert:tT(e.textEdit.insert),replace:tT(e.textEdit.replace)}:i.range=tT(e.textEdit.range),i.insertText=e.textEdit.newText),e.additionalTextEdits&&(i.additionalTextEdits=e.additionalTextEdits.map(tP)),e.insertTextFormat===W.Snippet&&(i.insertTextRules=tI.languages.CompletionItemInsertTextRule.InsertAsSnippet),i;});return{isIncomplete:n.isIncomplete,suggestions:s};});}};function tN(e){if(e)return{character:e.column-1,line:e.lineNumber-1};}function tD(e){if(e)return{start:{line:e.startLineNumber-1,character:e.startColumn-1},end:{line:e.endLineNumber-1,character:e.endColumn-1}};}function tT(e){if(e)return new tI.Range(e.start.line+1,e.start.character+1,e.end.line+1,e.end.character+1);}function tP(e){if(e)return{range:tT(e.range),text:e.newText};}var tO=class{constructor(e){this._worker=e;}provideHover(e,t,n){let i=e.uri;return this._worker(i).then(e=>e.doHover(i.toString(),tN(t))).then(e=>{if(e)return{range:tT(e.range),contents:function(e){if(e)return Array.isArray(e)?e.map(tF):[tF(e)];}(e.contents)};});}};function tF(e){return"string"==typeof e?{value:e}:e&&"object"==typeof e&&"string"==typeof e.kind?"plaintext"===e.kind?{value:e.value.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}:{value:e.value}:{value:"```"+e.language+"\n"+e.value+"\n```\n"};}var tU=class{constructor(e){this._worker=e;}provideDocumentHighlights(e,t,n){let i=e.uri;return this._worker(i).then(e=>e.findDocumentHighlights(i.toString(),tN(t))).then(e=>{if(e)return e.map(e=>({range:tT(e.range),kind:function(e){switch(e){case Z.Read:return tI.languages.DocumentHighlightKind.Read;case Z.Write:return tI.languages.DocumentHighlightKind.Write;case Z.Text:}return tI.languages.DocumentHighlightKind.Text;}(e.kind)}));});}},tW=class{constructor(e){this._worker=e;}provideDefinition(e,t,n){let i=e.uri;return this._worker(i).then(e=>e.findDefinition(i.toString(),tN(t))).then(e=>{if(e)return[tj(e)];});}};function tj(e){return{uri:tI.Uri.parse(e.uri),range:tT(e.range)};}var t$=class{constructor(e){this._worker=e;}provideReferences(e,t,n,i){let r=e.uri;return this._worker(r).then(e=>e.findReferences(r.toString(),tN(t))).then(e=>{if(e)return e.map(tj);});}},tH=class{constructor(e){this._worker=e;}provideRenameEdits(e,t,n,i){let r=e.uri;return this._worker(r).then(e=>e.doRename(r.toString(),tN(t),n)).then(e=>(function(e){if(!e||!e.changes)return;let t=[];for(let n in e.changes){let i=tI.Uri.parse(n);for(let r of e.changes[n])t.push({resource:i,versionId:void 0,textEdit:{range:tT(r.range),text:r.newText}});}return{edits:t};})(e));}},tq=class{constructor(e){this._worker=e;}provideDocumentSymbols(e,t){let n=e.uri;return this._worker(n).then(e=>e.findDocumentSymbols(n.toString())).then(e=>{if(e)return e.map(e=>"children"in e?function e(t){return{name:t.name,detail:t.detail??"",kind:tz(t.kind),range:tT(t.range),selectionRange:tT(t.selectionRange),tags:t.tags??[],children:(t.children??[]).map(t=>e(t))};}(e):{name:e.name,detail:"",containerName:e.containerName,kind:tz(e.kind),range:tT(e.location.range),selectionRange:tT(e.location.range),tags:[]});});}};function tz(e){let t=tI.languages.SymbolKind;switch(e){case J.File:return t.File;case J.Module:return t.Module;case J.Namespace:return t.Namespace;case J.Package:return t.Package;case J.Class:return t.Class;case J.Method:return t.Method;case J.Property:return t.Property;case J.Field:return t.Field;case J.Constructor:return t.Constructor;case J.Enum:return t.Enum;case J.Interface:return t.Interface;case J.Function:break;case J.Variable:return t.Variable;case J.Constant:return t.Constant;case J.String:return t.String;case J.Number:return t.Number;case J.Boolean:return t.Boolean;case J.Array:return t.Array;}return t.Function;}var tB=class{constructor(e){this._worker=e;}provideLinks(e,t){let n=e.uri;return this._worker(n).then(e=>e.findDocumentLinks(n.toString())).then(e=>{if(e)return{links:e.map(e=>({range:tT(e.range),url:e.target}))};});}},tV=class{constructor(e){this._worker=e;}provideDocumentFormattingEdits(e,t,n){let i=e.uri;return this._worker(i).then(e=>e.format(i.toString(),null,tG(t)).then(e=>{if(e&&0!==e.length)return e.map(tP);}));}},tK=class{constructor(e){this._worker=e,this.canFormatMultipleRanges=!1;}provideDocumentRangeFormattingEdits(e,t,n,i){let r=e.uri;return this._worker(r).then(e=>e.format(r.toString(),tD(t),tG(n)).then(e=>{if(e&&0!==e.length)return e.map(tP);}));}};function tG(e){return{tabSize:e.tabSize,insertSpaces:e.insertSpaces};}var tX=class{constructor(e){this._worker=e;}provideDocumentColors(e,t){let n=e.uri;return this._worker(n).then(e=>e.findDocumentColors(n.toString())).then(e=>{if(e)return e.map(e=>({color:e.color,range:tT(e.range)}));});}provideColorPresentations(e,t,n){let i=e.uri;return this._worker(i).then(e=>e.getColorPresentations(i.toString(),t.color,tD(t.range))).then(e=>{if(e)return e.map(e=>{let t={label:e.label};return e.textEdit&&(t.textEdit=tP(e.textEdit)),e.additionalTextEdits&&(t.additionalTextEdits=e.additionalTextEdits.map(tP)),t;});});}},tZ=class{constructor(e){this._worker=e;}provideFoldingRanges(e,t,n){let i=e.uri;return this._worker(i).then(e=>e.getFoldingRanges(i.toString(),t)).then(e=>{if(e)return e.map(e=>{let t={start:e.startLine+1,end:e.endLine+1};return void 0!==e.kind&&(t.kind=function(e){switch(e){case m.Comment:return tI.languages.FoldingRangeKind.Comment;case m.Imports:return tI.languages.FoldingRangeKind.Imports;case m.Region:return tI.languages.FoldingRangeKind.Region;}}(e.kind)),t;});});}},tY=class{constructor(e){this._worker=e;}provideSelectionRanges(e,t,n){let i=e.uri;return this._worker(i).then(e=>e.getSelectionRanges(i.toString(),t.map(tN))).then(e=>{if(e)return e.map(e=>{let t=[];for(;e;)t.push({range:tT(e.range)}),e=e.parent;return t;});});}},tJ=class extends tA{constructor(e){super(e,[".",":","<",'"',"=","/"]);}};function tQ(e){let t=new tE(e),n=(...e)=>t.getLanguageServiceWorker(...e),i=e.languageId;tI.languages.registerCompletionItemProvider(i,new tJ(n)),tI.languages.registerHoverProvider(i,new tO(n)),tI.languages.registerDocumentHighlightProvider(i,new tU(n)),tI.languages.registerLinkProvider(i,new tB(n)),tI.languages.registerFoldingRangeProvider(i,new tZ(n)),tI.languages.registerDocumentSymbolProvider(i,new tq(n)),tI.languages.registerSelectionRangeProvider(i,new tY(n)),tI.languages.registerRenameProvider(i,new tH(n)),"html"===i&&(tI.languages.registerDocumentFormattingEditProvider(i,new tV(n)),tI.languages.registerDocumentRangeFormattingEditProvider(i,new tK(n)));}function t0(e){let t=[],n=[],i=new tE(e);t.push(i);let r=(...e)=>i.getLanguageServiceWorker(...e);return!function(){let{languageId:t,modeConfiguration:i}=e;t2(n),i.completionItems&&n.push(tI.languages.registerCompletionItemProvider(t,new tJ(r))),i.hovers&&n.push(tI.languages.registerHoverProvider(t,new tO(r))),i.documentHighlights&&n.push(tI.languages.registerDocumentHighlightProvider(t,new tU(r))),i.links&&n.push(tI.languages.registerLinkProvider(t,new tB(r))),i.documentSymbols&&n.push(tI.languages.registerDocumentSymbolProvider(t,new tq(r))),i.rename&&n.push(tI.languages.registerRenameProvider(t,new tH(r))),i.foldingRanges&&n.push(tI.languages.registerFoldingRangeProvider(t,new tZ(r))),i.selectionRanges&&n.push(tI.languages.registerSelectionRangeProvider(t,new tY(r))),i.documentFormattingEdits&&n.push(tI.languages.registerDocumentFormattingEditProvider(t,new tV(r))),i.documentRangeFormattingEdits&&n.push(tI.languages.registerDocumentRangeFormattingEditProvider(t,new tK(r)));}(),t.push(t1(n)),t1(t);}function t1(e){return{dispose:()=>t2(e)};}function t2(e){for(;e.length;)e.pop().dispose();}},eaa7c5e8:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.e(t,{ITextResourceConfigurationService:function(){return r;},ITextResourcePropertiesService:function(){return s;}});var i=n("2aa5bed3");let r=(0,i.createDecorator)("textResourceConfigurationService"),s=(0,i.createDecorator)("textResourcePropertiesService");},f96f4942:function(e,t,n){"use strict";n.d(t,"__esModule",{value:!0}),n.d(t,"IMarkerDecorationsService",{enumerable:!0,get:function(){return i;}});let i=(0,n("2aa5bed3").createDecorator)("markerDecorationsService");},fda3c634:function(e,t,n){"use strict";var i=n("852bbaa9")._;n.d(t,"__esModule",{value:!0}),n.e(t,{SimpleWorkerClient:function(){return L;},SimpleWorkerServer:function(){return w;},create:function(){return y;},logOnceWebWorkerWarning:function(){return f;}});var r=n("852bbaa9"),s=n("0d0a6cfe"),o=n("e793196d"),a=n("77b755a9"),l=n("b1fc2372"),u=n("c83e5ca5"),d=r._(n("246b9c8c"));let c="default",h="$initialize",g=!1;function f(e){u.isWeb&&(g||(g=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(e.message));}class m{constructor(e,t,n,i,r){this.vsWorker=e,this.req=t,this.channel=n,this.method=i,this.args=r,this.type=0;}}class _{constructor(e,t,n,i){this.vsWorker=e,this.seq=t,this.res=n,this.err=i,this.type=1;}}class p{constructor(e,t,n,i,r){this.vsWorker=e,this.req=t,this.channel=n,this.eventName=i,this.arg=r,this.type=2;}}class v{constructor(e,t,n){this.vsWorker=e,this.req=t,this.event=n,this.type=3;}}class b{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4;}}class S{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map;}setWorkerId(e){this._workerId=e;}sendMessage(e,t,n){let i=String(++this._lastSentReq);return new Promise((r,s)=>{this._pendingReplies[i]={resolve:r,reject:s},this._send(new m(this._workerId,i,e,t,n));});}listen(e,t,n){let i=null,r=new o.Emitter({onWillAddFirstListener:()=>{i=String(++this._lastSentReq),this._pendingEmitters.set(i,r),this._send(new p(this._workerId,i,e,t,n));},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(i),this._send(new b(this._workerId,i)),i=null;}});return r.event;}handleMessage(e){e&&e.vsWorker&&(-1===this._workerId||e.vsWorker===this._workerId)&&this._handleMessage(e);}createProxyToRemoteChannel(e,t){return new Proxy(Object.create(null),{get:(n,i)=>("string"!=typeof i||n[i]||(C(i)?n[i]=t=>this.listen(e,i,t):M(i)?n[i]=this.listen(e,i,void 0):36!==i.charCodeAt(0)||(n[i]=async(...n)=>(await (null==t?void 0:t()),this.sendMessage(e,i,n)))),n[i])});}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e);}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return;}let t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let n=e.err;e.err.$isError&&((n=Error()).name=e.err.name,n.message=e.err.message,n.stack=e.err.stack),t.reject(n);return;}t.resolve(e.res);}_handleRequestMessage(e){let t=e.req;this._handler.handleMessage(e.channel,e.method,e.args).then(e=>{this._send(new _(this._workerId,t,e,void 0));},e=>{e.detail instanceof Error&&(e.detail=(0,s.transformErrorForSerialization)(e.detail)),this._send(new _(this._workerId,t,void 0,(0,s.transformErrorForSerialization)(e)));});}_handleSubscribeEventMessage(e){let t=e.req,n=this._handler.handleEvent(e.channel,e.eventName,e.arg)(e=>{this._send(new v(this._workerId,t,e));});this._pendingEvents.set(t,n);}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return;}this._pendingEmitters.get(e.req).fire(e.event);}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return;}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req);}_send(e){let t=[];if(0===e.type)for(let n=0;n<e.args.length;n++)e.args[n]instanceof ArrayBuffer&&t.push(e.args[n]);else 1===e.type&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t);}}class L extends a.Disposable{constructor(e,t){super(),this._localChannels=new Map,this._worker=this._register(e.create({amdModuleId:"vs/base/common/worker/simpleWorker",esmModuleLocation:t.esmModuleLocation,label:t.label},e=>{this._protocol.handleMessage(e);},e=>{(0,s.onUnexpectedError)(e);})),this._protocol=new S({sendMessage:(e,t)=>{this._worker.postMessage(e,t);},handleMessage:(e,t,n)=>this._handleMessage(e,t,n),handleEvent:(e,t,n)=>this._handleEvent(e,t,n)}),this._protocol.setWorkerId(this._worker.getId());let n=null,i=globalThis.require;void 0!==i&&"function"==typeof i.getConfig?n=i.getConfig():void 0!==globalThis.requirejs&&(n=globalThis.requirejs.s.contexts._.config),this._onModuleLoaded=this._protocol.sendMessage(c,h,[this._worker.getId(),JSON.parse(JSON.stringify(n)),t.amdModuleId]),this.proxy=this._protocol.createProxyToRemoteChannel(c,async()=>{await this._onModuleLoaded;}),this._onModuleLoaded.catch(e=>{this._onError("Worker failed to load "+t.amdModuleId,e);});}_handleMessage(e,t,n){let i=this._localChannels.get(e);if(!i)return Promise.reject(Error(`Missing channel ${e} on main thread`));if("function"!=typeof i[t])return Promise.reject(Error(`Missing method ${t} on main thread channel ${e}`));try{return Promise.resolve(i[t].apply(i,n));}catch(e){return Promise.reject(e);}}_handleEvent(e,t,n){let i=this._localChannels.get(e);if(!i)throw Error(`Missing channel ${e} on main thread`);if(C(t)){let r=i[t].call(i,n);if("function"!=typeof r)throw Error(`Missing dynamic event ${t} on main thread channel ${e}.`);return r;}if(M(t)){let n=i[t];if("function"!=typeof n)throw Error(`Missing event ${t} on main thread channel ${e}.`);return n;}throw Error(`Malformed event name ${t}`);}setChannel(e,t){this._localChannels.set(e,t);}_onError(e,t){console.error(e),console.info(t);}}function M(e){return"o"===e[0]&&"n"===e[1]&&d.isUpperAsciiLetter(e.charCodeAt(2));}function C(e){return/^onDynamic/.test(e)&&d.isUpperAsciiLetter(e.charCodeAt(9));}class w{constructor(e,t){this._localChannels=new Map,this._remoteChannels=new Map,this._requestHandlerFactory=t,this._requestHandler=null,this._protocol=new S({sendMessage:(t,n)=>{e(t,n);},handleMessage:(e,t,n)=>this._handleMessage(e,t,n),handleEvent:(e,t,n)=>this._handleEvent(e,t,n)});}onmessage(e){this._protocol.handleMessage(e);}_handleMessage(e,t,n){if(e===c&&t===h)return this.initialize(n[0],n[1],n[2]);let i=e===c?this._requestHandler:this._localChannels.get(e);if(!i)return Promise.reject(Error(`Missing channel ${e} on worker thread`));if("function"!=typeof i[t])return Promise.reject(Error(`Missing method ${t} on worker thread channel ${e}`));try{return Promise.resolve(i[t].apply(i,n));}catch(e){return Promise.reject(e);}}_handleEvent(e,t,n){let i=e===c?this._requestHandler:this._localChannels.get(e);if(!i)throw Error(`Missing channel ${e} on worker thread`);if(C(t)){let e=i[t].call(i,n);if("function"!=typeof e)throw Error(`Missing dynamic event ${t} on request handler.`);return e;}if(M(t)){let e=i[t];if("function"!=typeof e)throw Error(`Missing event ${t} on request handler.`);return e;}throw Error(`Malformed event name ${t}`);}getChannel(e){if(!this._remoteChannels.has(e)){let t=this._protocol.createProxyToRemoteChannel(e);this._remoteChannels.set(e,t);}return this._remoteChannels.get(e);}async initialize(e,t,r){if(this._protocol.setWorkerId(e),this._requestHandlerFactory){this._requestHandler=this._requestHandlerFactory(this);return;}t&&(void 0!==t.baseUrl&&delete t.baseUrl,void 0!==t.paths&&void 0!==t.paths.vs&&delete t.paths.vs,void 0!==t.trustedTypesPolicy&&delete t.trustedTypesPolicy,t.catchError=!0,globalThis.require.config(t));{let e=l.FileAccess.asBrowserUri(`${r}.js`).toString(!0);return Promise.all([n.ensure("605fd315")]).then(n.dr(i,n.bind(n,"605fd315"))).then(t=>t.default(`./${e}`)).then(e=>{if(this._requestHandler=e.create(this),!this._requestHandler)throw Error("No RequestHandler!");});}}}function y(e){return new w(e,null);}}}]);
